---
version: "0.10"
---
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head lang="en">
    <link rel="stylesheet" href="/css/groundwork.css"/>
    <link rel="stylesheet" href="/css/syntax.css"/>
    <style type="text/css">
        .logo a {
            text-decoration: none;
            color: #000000;
        }

        .logo img {
            height: 2em;
            position: relative;
            top: 0.55em;
            margin-right: 0.3em;
        }

        #welcome-top {
            border-bottom: 1px solid #ddd;
            background-color: #efefef;
        }

        #welcome-foot {
            background-color: #efefef;
            width: 100%;
            padding: 50px 0;
            text-align: right;
            border-top: 1px solid #ddd;
        }

        .highlight pre code {
            white-space: inherit;
            background-color: #FAFAFA;
            display: block;
            font-size: 14px;
        }


        .lite-square {
            border-radius: 4px;
        }

        #top-header {
            width: 100%;
            position: relative;
            background-color: lightgrey ;
            border-bottom: 1px solid #c6c6c6;
        }


        #top-header.sticky {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 100;
        }

        #top-header nav {
            border: none;
        }

        html, body {
            font-size: inherit;
        }
    </style>



    <meta charset="utf-8">
    <meta name="Description" content="Selma - Java bean mapping that compiles !">
    <title>Selma v{{page.version}}</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.10.1.min.js"><\/script>')</script>
    <script>
        setTimeout(function(){
            $('body').addClass('onload');
        }, 0);

        if (window.location.href.indexOf('http://xebia-france.github.io/selma') === 0) {
            document.write( '<meta http-equiv="refresh" content="0;URL=\'http://selma-java.org\'" />',
                    '<link rel="canonical" href="http://selma-java.org">');
        }

    </script>
    <script src="js/jquery.smoothscroll.js"></script>
    <script src="js/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    <script type="application/javascript" src="js/groundwork.all.js"></script>
    <script src="js/main.js"></script>

    <!-- Placez cette balise dans l'en-tête ou juste avant la balise de fermeture du corps de texte. -->
    <script src="https://apis.google.com/js/platform.js" async defer>
        {lang: 'fr'}
    </script>
</head>
<body>
<section id="welcome">
    <div id="welcome-top">
        <div class="container padded">
            <div class="row" >
                <div class="two thirds">
                    <h1 class="logo">
                        <a href="http://www.selma-java.org"><img src="img/logo-v6-medium.png" alt="Selma logo"/> Selma
                        </a>
                    </h1>
                </div>
                <div class="one thirds">
                    <p class="small double-pad-top no-pad-small-tablet align-right align-left-small-tablet"><a
                            href="https://github.com/xebia-france/selma" target="_parent">Github Project</a> - Version
                        {{page.version}}
                        <br>
                        <a class="icon-envelope noicon"
                           href="https://groups.google.com/forum/?hl=fr#!forum/selma-java">Mailing list</a> -
                        <a class="icon-bug noicon" href="https://github.com/xebia-france/selma/issues">Issues</a>
                        <br>
                        Created &amp; Maintained by <a href="http://twitter.com/slemesle" target="_blank">S&eacute;ven
                            Le Mesle</a>
                    </p>

                </div>
            </div>
        </div>
    </div>
    <div class="container padded">
        <div class="row double-gap-top-desktop double-gap-top-small-tablet triple-padded-small-tablet
         triple-padded-desktop"></div>

        <div class="row triple-gap-top-desktop triple-gap-top-small-tablet">

            <div class="large three fourths  padded bounceInLeft animated">
                <h1>Java bean mapping that compiles</h1>
                <h4>Clone, map and transform beans like manual without pain</h4>
            </div>

            <div class=" one fourths  triple-gap-top-desktop triple-gap-top-small-tablet padded bounceInLeft
            animated align-right-desktop align-right-small-tablet">
                <a id="get-started-button" href="#get-started" rel="next" class="green button large noicon">Get Started
                    <i class="icon-arrow-right"></i></a>
            </div>
        </div>

        <div class="row double-padded-small-tablet double-padded-desktop"></div>

        <div class="row triple-gap-top padded bounceInUp animated">
            <div class="three-up two-up-small-tablet padded">
                <h3 class="zero"><i class="icon-shield icon-2x gap-right"></i> Rock solid</h3>

                <p>Mapping is checked at compilation, it is refactoring proof
                    and debuggable</p>
            </div>
            <div class="three-up two-up-small-tablet padded">
                <h3 class="zero"><i class="icon-rocket icon-2x gap-right"></i> Lightening fast</h3>

                <p>Uses no reflection, no runtime processing, works as fast as manual mapping</p>
            </div>
            <div class="three-up two-up-small-tablet padded">
                <h3 class="zero"><i class="icon-code icon-2x gap-right"></i> Configuration as code</h3>

                <p>Uses only annotations to describe and configure mapping, no external configuration files</p>
            </div>
            <div class="three-up two-up-small-tablet padded">
                <h3 class="zero"><i class="icon-magic icon-2x gap-right"></i> Annotation processor</h3>

                <p>Built with <a href="https://www.jcp.org/en/jsr/detail?id=269" target="_blank">JSR 269</a>,
                    supports any Java version from v6, works anywhere (IDE, Maven, Gradle, ...)</p>
            </div>
            <div class="three-up two-up-small-tablet padded">
                <h3 class="zero"><i class="icon-thumbs-up icon-2x gap-right"></i> Stupid Simple</h3>

                <p>Lightweight API, easy to learn, gives rich compiler message with tips for fix</p>
            </div>
            <div class="three-up two-up-small-tablet padded">
                <h3 class="zero"><i class="icon-edit-sign icon-2x gap-right"></i> Customizable</h3>

                <p>Supports custom mappers, mapping post-processor, custom field to field mapping</p>
            </div>

        </div>
        <div class="row double-padded-small-tablet double-padded-desktop"></div>

    </div>

    <div id="welcome-foot" class="triple-gap-top-small-tablet triple-gap-top-desktop">
        <div class="container">
            <div class="row">

                <div class="one centered thirds">
                    <div class="g-plusone" data-size="large"></div>

                    <a href="https://twitter.com/share" class="twitter-share-button">Tweet</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?
                            'http':'https';
                        if(!d.getElementById(id)){
                            js=d.createElement(s);
                            js.id=id;
                            js.src=p+'://platform.twitter.com/widgets.js';
                            fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

                    <iframe src="http://ghbtns.com/github-btn.html?user=xebia-france&repo=selma&type=watch&count=true"
                            allowtransparency="true" frameborder="0" scrolling="0" width="104" height="20"></iframe>
                </div>
            </div>
        </div>
    </div>

    <header id="top-header">
        <div class="container">
            <div class="row padded">
                <div class="four fifths">
                <nav class="nav no-border">
                    <ul>
                    <li><a href="#welcome-top" alt="Selma Homepage" class="noicon">Selma</a></li>
                    <li><a href="#get-started" class="noicon">Get Started</a></li>
                    <li><a href="#news" class="noicon">What's new in 0.10</a></li>
                    <li><a href="#documentation" class="noicon">Documentation</a></li>
                    </ul>
                </nav>
                </div>
                <div class="right-one fifths ">
                    <a href="https://travis-ci.org/xebia-france/selma" class="noicon">
                        <img class="travis" src="https://travis-ci.org/xebia-france/selma.png?branch=master"
                             alt="Build Status"></a></li>
                    <!--<a href="#header" alt="Go to Top" class="nav">Top</a>-->
                </div>
            </div>
        </div>
    </header>
</section>
<section id="get-started">

    <div class="container">
        <div class="row triple-gap-top-small-tablet triple-gap-top-desktop "> &nbsp;</div>

        <div class="row triple-gap-top-small-tablet triple-gap-top-desktop ">
            <h1 class="lite-square bordered padded green-bg" >Getting started</h1>
            <h2 class="blue pad-left">Add Selma to your build</h2>
            <p class="pad-left medium">
                Selma is available in maven central, feel free to add it to your pom dependencies.
            </p>

            <div class="block  pad-left">
{% highlight xml %}
<!-- scope provided because the processor is only needed at compile time-->
<dependency>
    <groupId>fr.xebia.extras</groupId>
    <artifactId>selma-processor</artifactId>
    <version>{{page.version}}</version>
    <scope>provided</scope>
</dependency>

<!-- This is the only real dependency you will have in your binaries -->
<dependency>
    <groupId>fr.xebia.extras</groupId>
    <artifactId>selma</artifactId>
    <version>{{page.version}}</version>
</dependency>
{% endhighlight %}
            </div>

            <h2 class="blue pad-left pad-top">Declare the mapper</h2>

            <p class=" pad-left">
                Selma uses a mapper interface to describe and configure the needed mapping. Here we want to map Order
                to OrderDto and reverse.
            </p>
            <div class="block pad-left">
    {% highlight java %}
@Mapper(
    withCustomFields = {
        @Field({"customer.fullName", "customerFullName"}),
        @Field({"reference", "ref"})
    },
    withIgnoredFields = "id"
)
public interface SelmaMapper {

    // This will build a fresh new OrderDto
    OrderDto asOrderDto(Order in);

     // This will update the given order
    Order asOrder(OrderDto in, Order out);

}
{% endhighlight %}
            </div>
            <p class="pad-left pad-top">
                Here we defined some configuration for fields:
            </p>
            <div class="triple-gap-left">
                <ol class="list  pad-left ">
                    <li> Field <code class="inline-block">fullName</code> from the Customer class should be mapped to
                        the field <code class="inline-block">customerFullName</code> in OrderDto  </li>
                    <li> Field <code class="inline-block">reference</code> from any class should be mapped to the
                        field <code class="inline-block">ref</code> in any matching class</li>
                    <li> Field <code class="inline-block">id</code> should be skipped because it does not exist in
                        OrderDto</li>
                </ol>
            </div>

            <h2 class="blue pad-left pad-top">Use the mapper</h2>
            <p class="pad-left">
                Once built the generated mapper can be retrieved via Selma class.
            </p>
            <div class="block pad-left">
        {% highlight java %}
// Get SelmaMapper
SelmaMapper mapper = Selma.builder(SelmaMapper.class).build();

// Map my InBean
OrderDto res = mapper.asOrderDto(in);

        {% endhighlight %}
            </div>

            <h2 class="blue pad-left pad-top">Build and enjoy</h2>
            <p class="pad-left ">
                Compiler will report any issues like not mappable properties, unused mapping configuration or API
                miss-use.
                <br>
                <a href="https://github.com/xebia-france/selma/tree/master/examples">Check out our sample app
                    project.</a>
            </p>
            <hr>
        </div>
    </div>




</section>
<section id="news">

    <div class="container">
        <div class="row triple-gap-top-small-tablet triple-gap-top-desktop "> &nbsp;</div>

        <div class="row triple-gap-top-small-tablet triple-gap-top-desktop ">
            <h1 class="lite-square bordered padded green-bg">News</h1>
            <h2 class="blue pad-left pad-top">Brand new release 0.10</h2>
            <p class="pad-left">   This release deprecates <code class="inline-block">@IgnoreFields</code> and
                <code class="inline-block">@Fields.</code> The new <code class="inline-block">@Maps</code> annotation
                should now be used instead.
                It supports all the parameters available in <code class="inline-block">@Mapper</code> at the method scope.</p>
            <div class="pad-left">
                <ul class="unstyled ">
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/35">#35</a>: Deploy
                        snapshots to sonatype snapshot repository</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/36">#36</a>: Deprecate
                        <code class="inline-block">@IgnoreFields</code> and <code class="inline-block">@Fields</code>
                        in favor of a new annotation</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/37">#37</a>: Add support
                        for update graph in custom mappers</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/38">#38</a>: Add support
                        for scoped custom mappers</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/40">#40</a>: Add
                        compilation error when default enum value does not exist</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/41">#41</a>: Compilation
                        error when fields have no getter</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/42">#42</a>: Support
                        scoped mapping interceptor</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/43">#43</a>: Remove
                        deprecated <code class="inline-block">@IgnoreFields</code> from warning messages</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/44">#44</a>: Add support
                        for qualified class name in custom fields mapping</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/45">#45</a>: Add support
                        for custom embedded field to root level field</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/46">#46</a>: Add support
                        for ignore missing fields in source bean, destination bean or both</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/47">#47</a>: Fix missing
                        custom mapper in type mapping registry</li>
                </ul>
            </div>
            <p class="pad-left pad-top">
                See <a href="https://github.com/xebia-france/selma/blob/master/RELEASE_NOTES">release notes</a> or
                <a href="https://github.com/xebia-france/selma/issues?q=milestone%3A0.10">Milestone 0.10</a>.
            </p>
            <hr>
        </div>
    </div>

</section>

<section id="documentation">
    <div class="container">
        <div class="row triple-gap-top-small-tablet triple-gap-top-desktop "> &nbsp;</div>

        <div class="row triple-gap-top-small-tablet triple-gap-top-desktop ">
            <h1 class="lite-square bordered padded green-bg">Documentation</h1>

            <h2 class="blue pad-left pad-top">Mapping beans properties</h2>
            <p class="pad-left">
                Selma match properties using setter and getter names. Selma can map only same field names.
                By default, properties not existing in both source and destination beans will break compilation.
            </p>
            <h3 class="pad-left pad-top green">Same propertie names</h3>
            <h4 class="pad-left pad-top">Duplicate Beans</h4>
            <p class="pad-left">
                You can use Selma to build duplicates of your beans or map from model to DTO when they shares same
                property names.
            </p>
            <div class="container">
                <div class="row">
                    <div class="two-up two-up-small-tablet padded">
                        <h5 class="padded info-bg">Model Bean</h5>

{% highlight java %}
public class Person {

    private String firstName;
    private String lastName;
    private Date birthDay;
    private int age;
    private Long[] indices;
    private Collection tags;

    // + Getters and Setters
}
{% endhighlight %}
                    </div>

                    <div class="two-up two-up-small-tablet padded">
                        <h5 class="padded info-bg ">Mapper interface</h5>

{% highlight java %}
@Mapper
public interface PersonMapper {

    // Returns a duplicate of the source Person
    Person duplicatePerson(Person source);
}
{% endhighlight %}

                    </div>

                </div>
            </div>
            <h4 class="pad-left pad-top">Mapping to DTO</h4>
            <p class="pad-left">
                Selma can reduce a model bean to a DTO containing a sublist of the properties.
            </p>
            <div class="container">
                <div class="row">
                    <div class="two-up two-up-small-tablet padded">
                        <h5 class="padded info-bg">DTO Bean</h5>

{% highlight java %}
public class PersonDTO {

    private String firstName;
    private String lastName;
    private Date birthDay;

    // + Getters and Setters
}
{% endhighlight %}
                    </div>

                    <div class="two-up two-up-small-tablet padded">
                        <h5 class="padded info-bg ">Mapper interface</h5>

{% highlight java %}
@Mapper(withIgnoreMissing = IgnoreMissing.DESTINATION)
public interface PersonMapper {

    // Returns a new instance of PersonDTO mapped from Person source
    PersonDto asPersonDTO(Person source);
}
{% endhighlight %}

                    </div>

                </div>
            </div>
            <p class="pad-left">
                Here we used <code>IgnoreMissing.DESTINATION</code> to indicate we wish to ignore properties (age,
                indices, tags) from source bean missing in destination bean. But we could also choose to specify each
                ignored fields.
            </p>

                    <div class="padded">
                        <h5 class="padded info-bg">Mapper listing ignored fields</h5>
{% highlight java %}
@Mapper(withIgnoreFields = {"age", "Person.indices", "fr.xebia.selma.Person.tags"})
public interface PersonMapper {

    // Returns a new instance of PersonDTO mapped from Person source
    PersonDto asPersonDTO(Person source);
}
{% endhighlight %}
                    </div>
            <p class="pad-left">
                Here we used prefixes <code>Person</code> and <code>fr.xebia.selma.Person</code> to show that you can
                match ignored fields using simple class name or FQCN prefix.
            </p>


            <h4 class="pad-left pad-top">Mapping from DTO</h4>
            <p class="pad-left">
                Selma can use a reduced DTO to build a model bean.
            </p>
            <div class="padded">
                <h5 class="padded info-bg">Mapper interface</h5>
{% highlight java %}
@Mapper(withIgnoreMissing = IgnoreMissing.SOURCE)
public interface PersonMapper {

    // Returns a new instance of Person mapped from PersonDTO source
    Person asPerson(PersonDTO source);
}
{% endhighlight %}
            </div>
            <p class="pad-left">
                Here we used <code>IgnoreMissing.SOURCE</code> to indicate we wish to ignore properties (age,
                indices, tags) missing in source bean.
            </p>

            <h4 class="pad-left pad-top">Mapping to and from DTO</h4>
            <p class="pad-left">
                A mapper interface can describe multiple mapping methods.
            </p>
            <div class="padded">
                <h5 class="padded info-bg">Mapper interface</h5>
{% highlight java %}
@Mapper
public interface PersonMapper {

    // Returns a new instance of PersonDTO mapped from Person source
    @Map(withIgnoreMissing = IgnoreMissing.DESTINATION)
    PersonDto asPersonDTO(Person source);

    // Returns a new instance of Person mapped from PersonDTO source
    @Map(withIgnoreMissing = IgnoreMissing.SOURCE)
    Person asPerson(PersonDTO source);
}
{% endhighlight %}
            </div>
            <p class="pad-left">
                Here we used <code>@Map</code> annotation to describe mapping per method. Please notice that
                <code>@Mapper</code> configuration is available for all mapping methods while <code>@Map</code> is only
                applied to a single method. Both annotations provides the exact same parameters.
            </p>
            <h5 class="pad-left pad-top">Disabling missing field checks</h5>

            <p class="pad-left">
                By default Selma checks every single missing properties but you can choose to disable these helpfull
                checks.
            </p>
            <div class="padded">
                <h5 class="padded info-bg">Mapper ignoring all missing properties</h5>
{% highlight java %}
@Mapper(withIgnoreMissing = IgnoreMissing.ALL)
public interface PersonMapper {

    // Returns a new instance of PersonDTO mapped from Person source
    PersonDto asPersonDTO(Person source);

    // Returns a new instance of Person mapped from PersonDTO source
    Person asPerson(PersonDTO source);
}
{% endhighlight %}
            </div>
            <p class="pad-left">
                Here we used <code>IgnoreMissing.ALL</code> to disable missing properties checking. So we removed
                <code>@Map</code> annotation, feel free to combine <code>@Mapper</code> and <code>@Map</code> in the
                same mapper.
            </p>

            <p class="pad-left alert message ">
                @Map configuration inherits and override @Mapper configuration.
            </p>

<!--
            Mapping Nested beans
-->
            <h3 class="pad-left pad-top green">Mapping nested beans</h3>
            <p class="pad-left">
                Selma takes care of generating mapping for the complete bean graph. Each embedded bean will be mapped
                in it's own method of the generated code. You can customize the mapping
            </p>
            <div class="container">
                <div class="row">
                    <div class="two-up two-up-small-tablet padded">
                        <h5 class="padded info-bg">Person Bean</h5>

{% highlight java %}
public class Person {

    private String firstName;
    private String lastName;
    private Date birthDay;
    private Address residency;

    // + Getters and Setters
}
{% endhighlight %}
                    </div>

                    <div class="two-up two-up-small-tablet padded">
                        <h5 class="padded info-bg ">Address Bean</h5>

{% highlight java %}
public class Address {

    private String line1;
    private String line2;
    private String zipCode;
    private String city;
    private String country;

    // + Getters and Setters
}
{% endhighlight %}

                    </div>

                </div>
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Mapper declaring nested bean</h5>
{% highlight java %}
@Mapper
public interface PersonMapper {

    // Returns a new instance of PersonDTO mapped from Person source
    PersonDto asPersonDTO(Person source);

    // Returns a new instance of AddressDTO mapped from Address source
    @Map(withIgnoreFields = "country")
    AddressDTO asAddress(Address source);
}
{% endhighlight %}

                    </div>
                </div>

            </div>
            <p class="pad-left">
                Here we declared the <code>asAddress(Address source)</code> method in the mapper interface to demonstrate
                we can do it. <code>asPersonDTO(Person source)</code> implementation will call <code>asAddress(Address
                source)</code>. <b>Note that you do not need to declare this method for the mapping to work.</b>
            </p>

            <p class="pad-left alert message ">
                @Map annotation can be used to configure the mapping of each nested bean in the graph.
            </p>

            <!--
                Customize property names mapping
            -->
            <h3 class="pad-left pad-top green">Customize property names mapping</h3>
            <p class="pad-left">
                You can define custom property to property mapping using <code>withCustomFields</code>
                parameter available in <code>@Mapper</code> and <code>@Map</code>.
            </p>
<div class="container">
                <div class="row">
                    <div class="two-up two-up-small-tablet padded">
                        <h5 class="padded info-bg">Person Bean</h5>

{% highlight java %}
public class Person {

    private String firstName;
    private String lastName;
    private Date birthDay;

    // + Getters and Setters
}
{% endhighlight %}
                    </div>

                    <div class="two-up two-up-small-tablet padded">
                        <h5 class="padded info-bg ">PersonDTO Bean</h5>

{% highlight java %}
public class PersonDTO {

    private String name;
    private String lastName;
    private Date birthDate;

    // + Getters and Setters
}
{% endhighlight %}

                    </div>

                </div>
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Mapper with custom property names</h5>
{% highlight java %}
@Mapper(
    withCustomFields = {
        @Field({"firstName","name"}), @Field({"Person.birthDay","birthDate"})
    }
)
public interface PersonMapper {

    // Returns a new instance of PersonDTO mapped from Person source
    PersonDto asPersonDTO(Person source);

    // Returns a new instance of Person mapped from PersonDTO source
    Person asPerson(PersonDTO source);
}
{% endhighlight %}

                    </div>
                </div>
            </div>
            <p class="pad-left">
                This configuration will map <code>firstName</code> to <code>name</code> property and
                <code>birthDay</code> to <code>birthDate</code> property. The <code>@Field</code> annotation define a
                route that will be applied from <code>PersonDTO</code> to <code>Person</code> and reverse.
            </p>

            <p class="pad-left alert message ">
                @Field supports prefixes to match fields names using simple class name or FQCN prefix. You can also
                define custom fields in @Map annotation.
            </p>

            <h3 class="pad-left pad-top green">Flatten bean mapping</h3>
            <p class="pad-left">
                You can flatten properties from nested bean using <code>withCustomFields</code>
                parameter available in <code>@Mapper</code> and <code>@Map</code>.
            </p>
<div class="container">
                <div class="row">
                    <div class="two-up two-up-small-tablet padded">
                        <h5 class="padded info-bg">Person Bean</h5>

{% highlight java %}
public class Person {

    private String firstName;
    private String lastName;
    private Date birthDay;

    // See Address bean (line1, line2, zipCode, city, country)
    private Address address;

    // + Getters and Setters
}
{% endhighlight %}
                    </div>

                    <div class="two-up two-up-small-tablet padded">
                        <h5 class="padded info-bg ">PersonDTO Bean</h5>

{% highlight java %}
public class PersonDTO {

    private String firstName;
    private String lastName;
    private Date birthDay;
    private String addressLine1;
    private String addressLine2;
    private String addressZipCode;
    private String addressCity;
    private String addressCountry;

    // + Getters and Setters
}
{% endhighlight %}

                    </div>

                </div>
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Mapper flattening properties from nested bean</h5>
{% highlight java %}
@Mapper(
    withCustomFields = {
        @Field({"address.line1","addressLine1"}), @Field({"address.line2","addressLine2"}),
        @Field({"address.zipCode","addressZipCode"}), @Field({"address.city","addressCity"}),
        @Field({"address.country","addressCountry"})
    }
)
public interface PersonMapper {

    // Returns a new instance of PersonDTO mapped from Person source
    PersonDto asPersonDTO(Person source);

    // Returns a new instance of Person mapped from PersonDTO source
    Person asPerson(PersonDTO source);
}
{% endhighlight %}

                    </div>
                </div>
            </div>
            <p class="pad-left">
                This configuration will flatten properties from <code>Address</code> bean to address* properties in
                <code>PersonDTO</code>. It also works to unflatten the properties from <code>PersonDTO</code> to
                <code>Person</code> and <code>Address</code>.
            </p>

            <p class="pad-left alert message ">
                @Field may flatten from any level of the graph. You are not limited to first nested bean but can point a
                property from any nesting level.
            </p>

            <h2 id="update" class="blue pad-left pad-top">Updating destination bean</h2>

            <p class="pad-left">
                Instead of creating a new instance of the destination bean, you can choose to map the source bean
                against a given instance of the destination bean. You only need to declare a second parameter in your
                mapping methods that will be used as destination instance.
            </p>
                 <div class="block pad-left">
                     <h5 class="padded info-bg">Mapper updating a destination bean</h5>
{% highlight java %}
@Mapper
public interface PersonMapper {

    // Returns the given destination PersonDto mapped from Person source
    PersonDto updatePersonDTOFromPerson(Person source, PersonDto destination);

    // Returns the given destination Person mapped from PersonDTO source
    Person updatePersonFromPersonDTO(PersonDTO source, Person destination);
}
{% endhighlight %}
            </div>

            <h2 id="enums" class="blue pad-left pad-top">Mapping enums</h2>

            <p class="pad-left">
                Selma can map enums using a same value strategy by default. Selma will generate a new method for every
                single enum to enum mapping required, using a switch block without default.
            </p>
<div class="container">
                <div class="row">
                    <div class="two-up two-up-small-tablet padded">
                        <h5 class="padded info-bg">Person Bean</h5>

{% highlight java %}
public class Person {

    private String firstName;
    private String lastName;
    private Date birthDay;
    private PersonKind kind;

    public enum PersonKind {
       SIMPLE_CUSTOMER, PRODUCER, BUSINESS_CUSTOMER
    }
    // + Getters and Setters
}
{% endhighlight %}
                    </div>

                    <div class="two-up two-up-small-tablet padded">
                        <h5 class="padded info-bg ">PersonDTO Bean</h5>

{% highlight java %}
public class PersonDTO {

  private String firstName;
    private String lastName;
    private Date birthDay;
    private PersonKindDto kind;

    public enum PersonKindDto {
       SIMPLE_CUSTOMER, PRODUCER, BUSINESS_CUSTOMER
    }
    // + Getters and Setters
}
{% endhighlight %}

                    </div>

                </div>
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Mapper mapping same enum values</h5>
{% highlight java %}
@Mapper
public interface PersonMapper {

    // Returns a new instance of PersonDTO mapped from Person source
    PersonDto asPersonDTO(Person source);

}
{% endhighlight %}

                    </div>
                </div>
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Generated mapping method</h5>
{% highlight java %}
  /**
   * Mapping method overridden by Selma
   */
  public final PersonKindDto asSalesChannelDto(PersonKind in) {
    fr.xebia.extras.selma.beans.PersonKindDto out = null;
    if (in != null) {
      switch (in) {
        case SIMPLE_CUSTOMER :  {
          out = fr.xebia.extras.selma.beans.PersonKindDto.SIMPLE_CUSTOMER;
          break;
        }
        case PRODUCER :  {
          out = fr.xebia.extras.selma.beans.PersonKindDto.PRODUCER;
          break;
        }
        case BUSINESS_CUSTOMER :  {
          out = fr.xebia.extras.selma.beans.PersonKindDto.BUSINESS_CUSTOMER;
          break;
        }
      }
    }
    return out;
  }
{% endhighlight %}

                    </div>
                </div>
            </div>
            <p class="pad-left alert message ">
                Selma will raise compilation errors when both enums does not contain the same values.
            </p>

            <h3 id="enums-default-value" class="green pad-left pad-top">Enums with default value</h3>
            <p class="pad-left">
                Selma can map enums using a same value strategy with a default value. The default value will be used for
                values not existing in both enums.
            </p>

            <div class="container">
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
                        <h5 class="padded info-bg">Person Bean</h5>

{% highlight java %}
public class PersonDto {

    private String firstName;
    private String lastName;
    private Date birthDay;
    private PersonKindDto kind;

    public enum PersonKindDto {
       CUSTOMER, PRODUCER
    }
    // + Getters and Setters
}
{% endhighlight %}
                    </div>
                </div>
                                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Default value</h5>
{% highlight java %}
@Mapper
public interface PersonMapper {

    // Map SIMPLE_CUSTOMER and BUSINESS_CUSTOMER to CUSTOMER
    @Map(
         withEnums = @EnumMapper(from=PersonKind.class, to=PersonKindDto.class, defaultValue="CUSTOMER")
    )
    PersonDto asPersonDTO(Person source);

    // Map SIMPLE_CUSTOMER and BUSINESS_CUSTOMER to CUSTOMER
    @EnumMapper(defaultValue="CUSTOMER")
    PersonKindDto asPersonKindDto(PersonKind source);

}
{% endhighlight %}
                    </div>
                </div>
            </div>
            <p class="pad-left">
                Here we demonstrated 2 ways of declaring a default value for your enum mapping:
            </p>
            <div class="triple-gap-left">
                <ol class="list pad-left">
                    <li>First one, declares a <code>@Map</code> with enum, so we need to declare both from and to enum
                        with a default value.</li>
                    <li>Second one, declares a <code>@EnumMapper</code> directly on a method mapping two enums types,
                        with a default value.</li>
                </ol>
            </div>
            <p class="pad-top pad-left">
                It is also possible to declare the <code>enumMapper</code> inside <code>@Mapper</code>.<br/>
                With this configuration <code>SIMPLE_CUSTOMER</code> and <code>BUSINESS_CUSTOMER</code> will be mapped
                to <code>CUSTOMER</code>.
            </p>
            <p class="pad-left alert message ">
                To have more control over the enum mapping, you will need to declare a custom mapper.
            </p>


            <h2 id="custom-mapper" class="blue pad-left pad-top">Mapping with custom mapper</h2>

            <p class="pad-top pad-left">
                Sometimes, Selma will not do what you need. Let say, you want to convert from String to date or from
                Integer to Float. In Selma, we do not want magic conversion, so converting from boxed Integer to native
                int and reverse is supported but, we do not support auto-magically convert from int to float because
                there can be data loss. So you can define your own custom mapper. <br/>A custom mapper is a class that
                contains one or more methods taking an input parameter (the source bean / value) and return the
                destination value after hand coded mapping. You only need to add the class to the
                <code>withCustom</code> attribute of the <code>@Mapper</code> or <code>@Map</code> annotation.
            </p>
<div class="container">
                <div class="row">
                    <div class="two-up two-up-small-tablet padded">
                        <h5 class="padded info-bg">Person Bean</h5>

{% highlight java %}
public class Person {

    private String name;
    private Address address;

    // + Getters and Setters
}
{% endhighlight %}
                    </div>

                    <div class="two-up two-up-small-tablet padded">
                        <h5 class="padded info-bg ">PersonDTO Bean</h5>

{% highlight java %}
public class PersonDTO {

    private String name;
    private String address;

    // + Getters and Setters
}
{% endhighlight %}

                    </div>

                </div>
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Custom mapper mapping address to string</h5>
{% highlight java %}
public class AddressCustomMapper {

    // Returns a string representation of the address
    public String addressAsString(Address source){

        return source.toString();
    }

}
{% endhighlight %}
                    </div>
                </div>
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Mapper declaring a custom mapper</h5>
{% highlight java %}
@Mapper(withCustom = AddressCustomMapper.class)
public class PersonMapper {

    // Returns a PersonDTO instance mapped from source
    PersonDTO asPersonDTO(Person source);

}
{% endhighlight %}
                    </div>
                </div>
    </div>

            <p class="pad-left">The PersonMapper generated class will use the <code>AddressCustomMapper</code>
                <code>addressAsString</code> method to map the <code>Address</code> to <code>String</code>.</p>

            <h3 class="green pad-left pad-top">Update destination bean</h3>

            <p class="pad-left">You can use custom mappers to update the destination bean as described in <a class="noicon" href="#update">
                updating destination bean</a>. For this kind of use the custom mapping method should declare a second
                parameter giving the destination bean.
            </p>
            <div class="block pad-left">
{% highlight java %}
public class AddressCustomMapper {

    // Update des CustomMapper
    public Address carFromDto(String addressString, Address destination) {
        String [] lines = addressString.split('\n');
        if (lines.length > 0){
            dest.setFirstLine(lines[0]);
        }
        if (lines.length > 1){
            dest.setSecondLine(lines[1]);
        }
        return dest;
    }

}

{% endhighlight %}
            </div>
            <p class="pad-left">
                All custom mapper class should define a public default constructor so the generated class can
                instantiate it. Just remember, for selma, method name is nothing, just ensure to define the good In/Out
                type pair.<br/>
                Unused custom mapper will be reported as a compilation warning.
            </p>

            <h2 id="configuration" class="blue pad-left pad-top">Configuration</h2>

            <p class="pad-left">Selma can be used from Java 6 to 8.</p>

            <h3 class="green pad-left pad-top">Using Maven</h3>

            <p class="pad-left">Old releases of the maven compiler plugin tend to badly support annotation processor
                messages. We use successfully version 3.2.</p>
            <div class="block pad-left">
{% highlight xml %}
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.2</version>
    <configuration>
        <showWarnings>true</showWarnings>
        <optimize>true</optimize>
        <showDeprecation>true</showDeprecation>
    </configuration>
</plugin>
{% endhighlight %}
            </div>

            <p class="pad-left pad-top">You can also use the annotation processor maven plugin if you can not move to
                maven compiler 3.2.</p>
            <div class="block pad-left">
{% highlight xml %}
<plugin>
    <groupId>org.bsc.maven</groupId>
    <artifactId>maven-processor-plugin</artifactId>
    <version>2.2.4</version>
    <configuration>
        <defaultOutputDirectory>
            ${project.build.directory}/generated-sources
        </defaultOutputDirectory>
        <processors>
            <processor>fr.xebia.extras.selma.codegen.MapperProcessor</processor>
        </processors>
    </configuration>
    <executions>
        <execution>
            <id>process</id>
            <phase>generate-sources</phase>
            <goals>
                <goal>process</goal>
            </goals>
        </execution>
    </executions>
    <dependencies>
        <dependency>
            <groupId>fr.xebia.extras</groupId>
            <artifactId>selma-processor</artifactId>
            <version>${selma.version}</version>
        </dependency>
    </dependencies>
</plugin>
{% endhighlight %}
            </div>

            <p class="pad-left pad-top">You can find help about configuring eclipse
                <a href="https://github.com/xebia-france/selma/issues/28" class="noicon">here</a>.</p>

            <h3 class="green pad-left pad-top">Snapshot builds</h3>

            <p class="pad-left">You can retrieve snapshots builds from 0.11-SNAPSHOT in the sonatype snapshot
                repository. For this to work, you should add Sonatype snaphot repository in your maven settings.xml or
                pom.xml</p>
            <div class="block pad-left">
{% highlight xml %}
<repositories>
    <repository>
        <id>oss-sonatype</id>
        <name>oss-sonatype</name>
        <url>https://oss.sonatype.org/content/repositories/snapshots/</url>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository>
</repositories>
{% endhighlight %}
            </div>
        </div>
    </div>

</section>

<footer>
    <div id="footer" class="triple-gap-top-small-tablet triple-gap-top-desktop">
        <div class="container">
            <div class="row">

                <div class="whole align-right">
                    Proudly provided under Apache v2.0 license by <a href="http://twitter.com/XebiaFr">Xebia France</a>
                    and <a href="http://twitter.com/slemesle" target="_blank">S&eacute;ven
                    Le Mesle</a>
                </div>

            </div>
        </div>
    </div>

</footer>

<script>
    // Google Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-56401742-1', 'auto');
    ga('send', 'pageview');

</script>
</body>
</html>