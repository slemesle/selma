---
version: "1.0"
---
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head lang="en">
    <link rel="stylesheet" href="/css/groundwork.css"/>
    <link rel="stylesheet" href="/css/syntax.css"/>
    <style type="text/css">
        .logo a {
            text-decoration: none;
            color: #000000;
        }

        .logo img {
            height: 2em;
            position: relative;
            top: 0.55em;
            margin-right: 0.3em;
        }

        #welcome-top {
            border-bottom: 1px solid #ddd;
            background-color: #efefef;
        }

        #welcome-foot, footer {
            background-color: #efefef;
            width: 100%;
            padding: 50px 0;
            text-align: right;
            border-top: 1px solid #ddd;
        }

        .highlight pre code {
            white-space: inherit;
            background-color: #FAFAFA;
            display: block;
            font-size: 14px;
        }

        figure.highlight {
            margin: 1px;
        }

        .lite-square {
            border-radius: 4px;
        }

        #top-header {
            width: 100%;
            position: relative;
            background-color: lightgrey ;
            border-bottom: 1px solid #c6c6c6;
        }


        #top-header.sticky {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 100;
        }

        #top-header nav {
            border: none;
        }

        html, body {
            font-size: inherit;
        }

        #toc ul {
            list-style: none;
        }

        .h2 {
           padding-left: 20px;
        }
        .h3 {
           padding-left: 40px;
        }
        .h4 {
           padding-left: 60px;
        }

    </style>



    <meta charset="utf-8">
    <meta name="Description" content="Selma - Java bean mapping that compiles !">
    <title>Selma v{{page.version}} - Java bean mapping that compiles!</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.10.1.min.js"><\/script>')</script>
    <script>
        setTimeout(function(){
            $('body').addClass('onload');
        }, 0);

     <!--  /**
        if (window.location.href.indexOf('http://xebia-france.github.io/selma') === 0) {
            document.write( '<meta http-equiv="refresh" content="0;URL=\'http://selma-java.org\'" />',
                    '<link rel="canonical" href="http://selma-java.org">');
        }
	**/
	    -->

    </script>
    <script src="js/jquery.smoothscroll.js"></script>
    <!--<script src="js/toc.min.js"></script>-->
    <script src="js/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    <script type="application/javascript" src="js/groundwork.all.js"></script>
    <script src="js/main.js"></script>

    <!-- Placez cette balise dans l'en-tÃªte ou juste avant la balise de fermeture du corps de texte. -->
    <script src="https://apis.google.com/js/platform.js" async defer>
        {lang: 'fr'}
    </script>
</head>
<body>
<section id="welcome">
    <div id="welcome-top">
        <div class="container padded">
            <div class="row" >
                <div class="two thirds">
                    <h1 class="logo">
                        <a href="http://www.selma-java.org"><img src="img/logo-v6-medium.png" alt="Selma logo"/> Selma
                        </a>
                    </h1>
                </div>
                <div class="one thirds">
                    <p class="small double-pad-top no-pad-small-tablet align-right align-left-small-tablet"><a
                            href="https://github.com/xebia-france/selma" target="_parent">Github Project</a> - Version
                        {{page.version}}
                        <br>
                        <a class="icon-envelope noicon"
                           href="https://groups.google.com/forum/?hl=fr#!forum/selma-java">Mailing list</a> -
                        <a class="icon-bug noicon" href="https://github.com/xebia-france/selma/issues">Issues</a>
                        <br>
                        Created &amp; Maintained by <a href="http://twitter.com/slemesle" target="_blank">S&eacute;ven
                            Le Mesle</a>
                    </p>

                </div>
            </div>
        </div>
    </div>
    <div class="container padded">
        <div class="row double-gap-top-desktop double-gap-top-small-tablet triple-padded-small-tablet
         triple-padded-desktop"></div>

        <div class="row triple-gap-top-desktop triple-gap-top-small-tablet">

            <div class="large three fourths  padded bounceInLeft animated">
                <h1>Java bean mapping that compiles</h1>
                <h4>Clone, map and transform beans like manual without pain</h4>
            </div>

            <div class=" one fourths  triple-gap-top-desktop triple-gap-top-small-tablet padded bounceInLeft
            animated align-right-desktop align-right-small-tablet">
                <a id="get-started-button" href="#get-started" rel="next" class="green button large noicon">Get Started
                    <i class="icon-arrow-right"></i></a>
            </div>
        </div>

        <div class="row double-padded-small-tablet double-padded-desktop"></div>

        <div class="row triple-gap-top padded bounceInUp animated">
            <div class="three-up-desktop two-up-small-tablet padded">
                <h3 class="zero"><i class="icon-shield icon-2x gap-right"></i> Rock solid</h3>

                <p>Mapping is checked at compilation, it is refactoring proof
                    and debuggable</p>
            </div>
            <div class="three-up-desktop two-up-small-tablet padded">
                <h3 class="zero"><i class="icon-rocket icon-2x gap-right"></i> Lightening fast</h3>

                <p>Uses no reflection, no runtime processing, works as fast as manual mapping</p>
            </div>
            <div class="three-up-desktop two-up-small-tablet padded">
                <h3 class="zero"><i class="icon-code icon-2x gap-right"></i> Configuration as code</h3>

                <p>Uses only annotations to describe and configure mapping, no external configuration files</p>
            </div>
            <div class="three-up-desktop two-up-small-tablet padded">
                <h3 class="zero"><i class="icon-magic icon-2x gap-right"></i> Annotation processor</h3>

                <p>Built with <a href="https://www.jcp.org/en/jsr/detail?id=269" target="_blank">JSR 269</a>,
                    supports any Java version from v6, works anywhere (IDE, Maven, Gradle, ...)</p>
            </div>
            <div class="three-up-desktop two-up-small-tablet padded">
                <h3 class="zero"><i class="icon-thumbs-up icon-2x gap-right"></i> Stupid Simple</h3>

                <p>Lightweight API, easy to learn, gives rich compiler message with tips for fix</p>
            </div>
            <div class="three-up-desktop two-up-small-tablet padded">
                <h3 class="zero"><i class="icon-edit-sign icon-2x gap-right"></i> Customizable</h3>

                <p>Supports custom mappers, mapping post-processor, custom field to field mapping</p>
            </div>

        </div>
        <div class="row double-padded-small-tablet double-padded-desktop"></div>

    </div>

    <div id="welcome-foot" class="triple-gap-top-small-tablet triple-gap-top-desktop">
        <div class="container">
            <div class="row">

                <div class="one centered thirds">
                    <div class="g-plusone" data-size="large"></div>

                    <a href="https://twitter.com/share" class="twitter-share-button">Tweet</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?
                            'http':'https';
                        if(!d.getElementById(id)){
                            js=d.createElement(s);
                            js.id=id;
                            js.src=p+'://platform.twitter.com/widgets.js';
                            fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

                    <iframe src="http://ghbtns.com/github-btn.html?user=xebia-france&repo=selma&type=watch&count=true"
                            allowtransparency="true" frameborder="0" scrolling="0" width="104" height="20"></iframe>
                </div>
            </div>
        </div>
    </div>

    <header id="top-header">
        <div class="container">
            <div class="row padded">
                <div class="four fifths">
                <nav class="nav no-border">
                    <ul>
                    <li><a href="#welcome-top" alt="Selma Homepage" class="noicon">Selma</a></li>
                    <li><a href="#get-started" class="noicon">Get Started</a></li>
                    <li><a href="#news" class="noicon">What's new in {{page.version}}</a></li>
                    <li><a href="#documentation" class="noicon">Documentation</a></li>
                    </ul>
                </nav>
                </div>
                <div class="right-one fifths ">
                    <a href="https://travis-ci.org/xebia-france/selma" class="noicon">
                        <img class="travis" src="https://travis-ci.org/xebia-france/selma.png?branch=master"
                             alt="Build Status"></a></li>
                    <!--<a href="#header" alt="Go to Top" class="nav">Top</a>-->
                </div>
            </div>
        </div>
    </header>
</section>
<section id="get-started">

    <div class="container">
        <div class="row triple-gap-top-small-tablet triple-gap-top-desktop "> &nbsp;</div>

        <div class="row triple-gap-top-small-tablet triple-gap-top-desktop ">
            <h1 class="lite-square bordered padded green-bg" >Getting started</h1>
            <h2 class="blue pad-left">Add Selma to your build</h2>
            <p class="pad-left medium">
                Selma is available in maven central, feel free to add it to your pom dependencies.
            </p>

            <div class="block pad-left responsive">
{% highlight xml %}
<!-- scope provided because the processor is only needed at compile time-->
<dependency>
    <groupId>fr.xebia.extras</groupId>
    <artifactId>selma-processor</artifactId>
    <version>{{page.version}}</version>
    <scope>provided</scope>
</dependency>

<!-- This is the only real dependency you will have in your binaries -->
<dependency>
    <groupId>fr.xebia.extras</groupId>
    <artifactId>selma</artifactId>
    <version>{{page.version}}</version>
</dependency>
{% endhighlight %}
            </div>

            <h2 class="blue pad-left pad-top">Declare the mapper</h2>

            <p class=" pad-left">
                Selma uses a mapper interface to describe and configure the needed mapping. Here we want to map Order
                to OrderDto and reverse.
            </p>
            <div class="block pad-left responsive">
    {% highlight java %}
@Mapper(
    withCustomFields = {
        @Field({"customer.fullName", "customerFullName"}),
        @Field({"reference", "ref"})
    },
    withIgnoredFields = "id"
)
public interface SelmaMapper {

    // This will build a fresh new OrderDto
    OrderDto asOrderDto(Order in);

     // This will update the given order
    Order asOrder(OrderDto in, Order out);

}
{% endhighlight %}
            </div>
            <p class="pad-left pad-top">
                Here we defined some configuration for fields:
            </p>
            <div class="triple-gap-left">
                <ol class="list  pad-left ">
                    <li> Field <code class="inline-block">fullName</code> from the Customer class should be mapped to
                        the field <code class="inline-block">customerFullName</code> in OrderDto  </li>
                    <li> Field <code class="inline-block">reference</code> from any class should be mapped to the
                        field <code class="inline-block">ref</code> in any matching class</li>
                    <li> Field <code class="inline-block">id</code> should be skipped because it does not exist in
                        OrderDto</li>
                </ol>
            </div>

            <h2 class="blue pad-left pad-top">Use the mapper</h2>
            <p class="pad-left">
                Once built the generated mapper can be retrieved via Selma class.
            </p>
            <div class="block pad-left responsive">
        {% highlight java %}
// Get SelmaMapper
SelmaMapper mapper = Selma.builder(SelmaMapper.class).build();

// Map my InBean
OrderDto res = mapper.asOrderDto(in);

        {% endhighlight %}
            </div>

            <h2 class="blue pad-left pad-top">Build and enjoy</h2>
            <p class="pad-left ">
                Compiler will report any issues like not mappable properties, unused mapping configuration or API
                miss-use.
                <br>
                <a href="https://github.com/xebia-france/selma/tree/master/examples">Check out our sample app
                    project.</a>
            </p>
            <hr>
        </div>
    </div>




</section>
<section id="news">

    <div class="container">
        <div class="row triple-gap-top-small-tablet triple-gap-top-desktop "> &nbsp;</div>
<!--
his is the first 1.0 release of Selma coming with bug fixes and many new features.
Like custom field to field mapping, Maps inheritance, Bean Aggregation and CDI support.

* #138: Add @InheritMaps to avoid @Maps duplication

-->
        <div class="row triple-gap-top-small-tablet triple-gap-top-desktop ">
            <h1 class="lite-square bordered padded green-bg">News</h1>

            <h2 class="blue pad-left pad-top">Finally a 1.0 release</h2>
            <p class="pad-left">
                <b>Why a 1.0 release now ?</b> Selma now support what I expected in it from the beginning : Custom type to type
                or field to field and type to type mapping, cyclic mapping, factories, enums, Collections, IoC, Arrays,
                all kinds of types mapping and so on.
                The 1.0 release of Selma comes with bug fixes and many new features.
                Like custom field to field mapping, Maps inheritance, Bean Aggregation and CDI support.
            </p>
            <div class="pad-left">
                <ul class="unstyled ">
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/106">#106</a>: Add support
                        for custom mapping method on per field basis</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/101">101</a>: Add support
                        for abstract custom mappers</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/100">#100</a>: Add support
                        for aggregated bean mapping</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/102">#102</a>: Fix default
                        lower bound type resolution for generic types</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/109">#109</a>: Fix custom
                        mapper call with out parameter</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/111">#111</a>: Add support
                        for inner mapper interface</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/115">#115</a>: Add support
                        for CDI injection</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/118">#118</a>: Filter enum
                        private members to avoid</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/104">#104</a>: Remove
                        compiler warnings in custom mapper validation</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/119">#119</a>: Add support
                        for mapping interfaces instead of beans</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/120">#120</a>: Add support
                        for abstract getters and setters in mapped beans</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/126">#125</a>: Fix
                        declared bean array mapping</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/127">#127</a>: Fix any
                        type to String default mapping</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/133">#133</a>: Fix mapping
                        embedded array of prime</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/137">#137</a>: Improve CDI
                        support with CDI and CDI_SINGLETON</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/138">#138</a>: Add
                        @InheritMaps to avoid @Maps duplication</li>
                </ul>
            </div>
            <p class="pad-left pad-top">
                See <a href="https://github.com/xebia-france/selma/blob/master/RELEASE_NOTES">release notes</a> or
                <a href="https://github.com/xebia-france/selma/issues?q=milestone%31.0">Milestone 1.0</a> or
                <a href="https://github.com/xebia-france/selma/releases/tag/selma-parent-1.0">Github Release Tag</a>.
            </p>


             <h2 class="blue pad-left pad-top">Brand new release 0.15</h2>
            <p class="pad-left">
                This release fixes bugs in generic handling and factory methods.
                It also implement a new cyclic mapping support using an instance cache. Many thanks to all bug reports
                and pull requests. 1.0 release will be next big release with specific field to field custom mappers.
                <b>This will be the last release before final 1.0</b>
            </p>
            <div class="pad-left">
                <ul class="unstyled ">
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/2">#2</a>: Support for
                        cyclic mapping with new @Mapper(withCyclicMapping = true) Thanks to Julien Audo</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/101">101</a>: Fix generic
                        types resolving in source and destination bean</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/81">#81</a>: Make a whole
                        package immutable with new @Mapper(withImmutablesPackages = {"org.project.immutables"})
                        Thanks to Julien Audo</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/90">#90</a>: Automatic
                        conversion of primitives types to String</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/80">#80</a>: Add factory
                        support for beans without public constructor Thanks to @facboy</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/97">#97</a>: Add support
                        for mapping raw types and improve error handling Thanks to @facboy</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/95">#95</a>: Add support
                        for Builder-style setters Thanks to @facboy</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/92">#92</a>: Fix using
                        interceptor inside abstract mapper class Thanks to @vakoroteev</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/104">#104</a>: Remove
                        compiler warnings in custom mapper validation</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/89">#89</a>: Ignore static
                        methods in mapped beans</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/101">#101</a>: Fix generic
                        types mapping support</li>
                </ul>
            </div>
            <p class="pad-left pad-top">
                See <a href="https://github.com/xebia-france/selma/blob/master/RELEASE_NOTES">release notes</a> or
                <a href="https://github.com/xebia-france/selma/issues?q=milestone%3A0.15">Milestone 0.15</a>.
            </p>

            <h2 class="blue pad-left pad-top">Brand new release 0.14</h2>
            <p class="pad-left">
                This release introduces factory methods, it is now possible to declare factory beans inside the
                mapper. Generic type handling has also been improved to support declaring a Mapper generic interface.
                Many thanks to all bug reports and pull requests. 1.0 release is coming we just cyclic mapping handling
                and specific field to field custom mappers.
            </p>
            <div class="pad-left">
                <ul class="unstyled ">
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/63">#63</a>: Support for
                        generic type in mappers</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/39">#39</a>: Add Factory
                        method and class support</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/78">#78</a>: Add
                        WithIoCServiceName to name Spring service using annotation, Thanks to Benoit Charret</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/75">#75</a>: Fix generic
                        inherited type handling in collections and map, Thanks to @julaudo</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/70">#70</a>: Handle custom
                        mappers in a .class package, Thanks to Antoine Leveugle</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/57">#57</a>: Improve error
                        messages for failing custom field to field mapping</li>
                </ul>
            </div>
            <p class="pad-left pad-top">
                See <a href="https://github.com/xebia-france/selma/blob/master/RELEASE_NOTES">release notes</a> or
                <a href="https://github.com/xebia-france/selma/issues?q=milestone%3A0.14">Milestone 0.14</a>.
            </p>

             <h2 class="blue pad-left pad-top">Brand new release 0.13</h2>
            <!--
* #68: Fix bad AnnotationMirror cast not valid in eclipse compiler

            -->
            <p class="pad-left">
                This release introduces abstract class mappers, it is now possible to declare custom mappings inside the
                mapper and call mapping methods from custom mappings. There are also bug fixes.
                Many thanks to all bug reports and pull requests.
            </p>
            <div class="pad-left">
                <ul class="unstyled ">
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/53">#53</a>: Support for
                        Abstract class mappers to allow custom mapping method to call mapper methods with
                        <code class="inline-block">this</code>.</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/65">#65</a>: Fix
                        properties matching to force exact name match instead of startsWith match</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/66">#66</a>: Fix temporary
                        variables names on embedded field mapping</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/67">#67</a>: Fix custom
                        mapper registry to match properly both update and immutable methods</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/68">#68</a>: Fix bad
                        AnnotationMirror cast not valid in eclipse compiler</li>
                </ul>
            </div>
            <p class="pad-left pad-top">
                See <a href="https://github.com/xebia-france/selma/blob/master/RELEASE_NOTES">release notes</a> or
                <a href="https://github.com/xebia-france/selma/issues?q=milestone%3A0.13">Milestone 0.13</a>.
            </p>

            <h2 class="blue pad-left pad-top">Release 0.12</h2>
            <p class="pad-left">
                This release adds support for collection mapping strategy. The mapping strategy allows to choose wether
                you want to populate collections from getter or not.
            </p>
               <div class="block pad-left responsive">
        {% highlight java %}
@Mapper(withCollectionStrategy = ALLOW_GETTER) // Enable collections mapping from getter
        {% endhighlight %}
            </div>

            <p class="pad-left pad-top">
                See <a href="https://github.com/xebia-france/selma/blob/master/RELEASE_NOTES">release notes</a> or
                <a href="https://github.com/xebia-france/selma/issues?q=milestone%3A0.12">Milestone 0.12</a>.
            </p>

            <h2 class="blue pad-left pad-top">Release 0.11</h2>
            <p class="pad-left">
            This release adds Spring support using the new <code>withIoc=SPRING</code>. It is also now possible to use
                a Selma mapper as the custom mapper of another one.
            </p>
            <p class="pad-left pad-top">
                See <a href="https://github.com/xebia-france/selma/blob/master/RELEASE_NOTES">release notes</a> or
                <a href="https://github.com/xebia-france/selma/issues?q=milestone%3A0.11">Milestone 0.11</a>.
            </p>

            <h2 class="blue pad-left pad-top">Release 0.10</h2>
            <p class="pad-left">
                This release deprecates <code class="inline-block">@IgnoreFields</code> and
                <code class="inline-block">@Fields.</code> The new <code class="inline-block">@Maps</code> annotation
                should now be used instead.
                It supports all the parameters available in <code class="inline-block">@Mapper</code> at the method
                scope.
            </p>
            <div class="pad-left">
                <ul class="unstyled ">
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/35">#35</a>: Deploy
                        snapshots to sonatype snapshot repository</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/36">#36</a>: Deprecate
                        <code class="inline-block">@IgnoreFields</code> and <code class="inline-block">@Fields</code>
                        in favor of a new annotation</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/37">#37</a>: Add support
                        for update graph in custom mappers</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/38">#38</a>: Add support
                        for scoped custom mappers</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/40">#40</a>: Add
                        compilation error when default enum value does not exist</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/41">#41</a>: Compilation
                        error when fields have no getter</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/42">#42</a>: Support
                        scoped mapping interceptor</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/43">#43</a>: Remove
                        deprecated <code class="inline-block">@IgnoreFields</code> from warning messages</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/44">#44</a>: Add support
                        for qualified class name in custom fields mapping</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/45">#45</a>: Add support
                        for custom embedded field to root level field</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/46">#46</a>: Add support
                        for ignore missing fields in source bean, destination bean or both</li>
                    <li> <a class="noicon" href="https://github.com/xebia-france/selma/issues/47">#47</a>: Fix missing
                        custom mapper in type mapping registry</li>
                </ul>
            </div>
            <p class="pad-left pad-top">
                See <a href="https://github.com/xebia-france/selma/blob/master/RELEASE_NOTES">release notes</a> or
                <a href="https://github.com/xebia-france/selma/issues?q=milestone%3A0.10">Milestone 0.10</a>.
            </p>
            <hr>
        </div>
    </div>

</section>

<section id="documentation">
    <div class="container">
        <div class="row triple-gap-top-small-tablet triple-gap-top-desktop "> &nbsp;</div>

        <div class="row triple-gap-top-small-tablet triple-gap-top-desktop ">
            <h1 class="lite-square bordered padded green-bg">Documentation</h1>

            <ul id="toc" class="padded large">
                    <li class="h2"><a class="noicon" href="#bean-properties">Mapping beans properties</a></li>
                    <li class="h3"><a class="noicon" href="#same-propertie-name">Same propertie names</a></li>
                    <li class="h4"><a class="noicon" href="#duplicate-beans">Duplicate Beans</a></li>
                    <li class="h4"><a class="noicon" href="#mapping-to-dto">Mapping to DTO</a></li>
                    <li class="h4"><a class="noicon" href="#mapping-from-dto">Mapping from DTO</a></li>
                    <li class="h4"><a class="noicon" href="#mapping-to-and-from-dto">Mapping to and from DTO</a></li>
                    <li class="h4"><a class="noicon" href="#disabling-missing-field">Disabling missing field checks</a></li>
                    <li class="h3"><a class="noicon" href="#mapping-nested-beans">Mapping nested beans</a></li>
                    <li class="h3"><a class="noicon" href="#mapping-cyclic-beans">Mapping cyclic beans</a></li>
                    <li class="h3"><a class="noicon" href="#customize-property-names">Customize property names mapping</a></li>
                    <li class="h3"><a class="noicon" href="#flatten-bean-mapping">Flatten bean mapping</a></li>
                    <li class="h3"><a class="noicon" href="#inheritmaps">Reduce @Maps duplication with @InheritMaps</a></li>
                    <li class="h2"><a class="noicon" href="#updating-destination-bean">Updating destination bean</a></li>
                    <li class="h2"><a class="noicon" href="#mapping-collections">Mapping collections</a></li>
                    <li class="h2"><a class="noicon" href="#mapping-enums">Mapping enums</a></li>
                    <li class="h3"><a class="noicon" href="#enums-default-value">Enums with default value</a></li>
                    <li class="h3"><a class="noicon" href="#bean-aggregation">Mapping with multiple source beans</a></li>
                    <li class="h2"><a class="noicon" href="#custom-mapper">Mapping with custom mapper</a></li>
                    <li class="h3"><a class="noicon" href="#custom-mapper-field">Custom mapper for specific fields</a></li>
                    <li class="h3"><a class="noicon" href="#update-destination-bean">Update destination bean</a></li>
                    <li class="h3"><a class="noicon" href="#mapping-interceptor">Mapping interceptor</a></li>
                    <li class="h3"><a class="noicon" href="#abstract-mapper">Abstract mapper</a></li>
                    <li class="h3"><a class="noicon" href="#mapping-selma-mapper">Selma Mapper as custom mapper</a></li>
                    <li class="h2"><a class="noicon" href="#immutables">Mapping immutable types</a></li>
                    <li class="h2"><a class="noicon" href="#factory">Using factory</a></li>
                    <li class="h3"><a class="noicon" href="#sourced-beans">Sourced Beans</a></li>
                    <li class="h3"><a class="noicon" href="#factory-methods">Factory methods</a></li>
                    <li class="h2"><a class="noicon" href="#building-mapper">Building the mapper</a></li>
                    <li class="h3"><a class="noicon" href="#spring-ioc">Spring IoC</a></li>
                    <li class="h3"><a class="noicon" href="#cdi-ioc">CDI IoC</a></li>
                    <li class="h2"><a class="noicon" href="#configuration">Configuration</a></li>
                    <li class="h3"><a class="noicon" href="#using-maven">Using Maven</a></li>
                    <li class="h3"><a class="noicon" href="#snapshots-build">Snapshot builds</a></li>
                </ul>
            </div>

            <h2 id="bean-properties" class="blue pad-left pad-top">Mapping beans properties</h2>
            <p class="pad-left">
                Selma match properties using setter and getter names. Selma can map only same field names.
                By default, properties not existing in both source and destination beans will break compilation.
            </p>
            <h3 id="same-propertie-name" class="pad-left pad-top green">Same propertie names</h3>
            <h4 id="duplicate-beans" class="pad-left pad-top">Duplicate Beans</h4>
            <p class="pad-left">
                You can use Selma to build duplicates of your beans or map from model to DTO when they shares same
                property names.
            </p>
            <div class="container">
                <div class="row">
                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg">Model Bean</h5>
<div class="responsive">
{% highlight java %}
public class Person {

    private String firstName;
    private String lastName;
    private Date birthDay;
    private int age;
    private Long[] indices;
    private Collection tags;

    // + Getters and Setters
}
{% endhighlight %}</div>
                    </div>

                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg ">Mapper interface</h5>

<div class="responsive">
{% highlight java %}
@Mapper
public interface PersonMapper {

    // Returns a duplicate of the source Person
    Person duplicatePerson(Person source);
}
{% endhighlight %}
</div>

                    </div>

                </div>
            </div>
            <h4 id="mapping-to-dto" class="pad-left pad-top">Mapping to DTO</h4>
            <p class="pad-left">
                Selma can reduce a model bean to a DTO containing a sublist of the properties.
            </p>
            <div class="container">
                <div class="row">
                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg">DTO Bean</h5>

<div class="responsive">
{% highlight java %}
public class PersonDTO {

    private String firstName;
    private String lastName;
    private Date birthDay;

    // + Getters and Setters
}
{% endhighlight %}
</div>                    </div>

                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg ">Mapper interface</h5>
<div class="responsive">
{% highlight java %}
@Mapper(withIgnoreMissing = IgnoreMissing.DESTINATION)
public interface PersonMapper {

    // Returns a new instance of PersonDTO mapped from Person source
    PersonDto asPersonDTO(Person source);
}
{% endhighlight %}
</div>
                    </div>

                </div>
            </div>
            <p class="pad-left">
                Here we used <code>IgnoreMissing.DESTINATION</code> to indicate we wish to ignore properties (age,
                indices, tags) from source bean missing in destination bean. But we could also choose to specify each
                ignored fields.
            </p>

                    <div class="padded">
                        <h5 class="padded info-bg">Mapper listing ignored fields</h5>
<div class="responsive">
{% highlight java %}
@Mapper(withIgnoreFields = {"age", "Person.indices", "fr.xebia.selma.Person.tags"})
public interface PersonMapper {

    // Returns a new instance of PersonDTO mapped from Person source
    PersonDto asPersonDTO(Person source);
}
{% endhighlight %}
</div>                    </div>
            <p class="pad-left">
                Here we used prefixes <code>Person</code> and <code>fr.xebia.selma.Person</code> to show that you can
                match ignored fields using simple class name or FQCN prefix.
            </p>


            <h4 id="mapping-from-dto" class="pad-left pad-top">Mapping from DTO</h4>
            <p class="pad-left">
                Selma can use a reduced DTO to build a model bean.
            </p>
            <div class="padded">
                <h5 class="padded info-bg">Mapper interface</h5>
<div class="responsive">
{% highlight java %}
@Mapper(withIgnoreMissing = IgnoreMissing.SOURCE)
public interface PersonMapper {

    // Returns a new instance of Person mapped from PersonDTO source
    Person asPerson(PersonDTO source);
}
{% endhighlight %}
 </div>           </div>
            <p class="pad-left">
                Here we used <code>IgnoreMissing.SOURCE</code> to indicate we wish to ignore properties (age,
                indices, tags) missing in source bean.
            </p>

            <h4 id="mapping-to-and-from-dto" class="pad-left pad-top">Mapping to and from DTO</h4>
            <p class="pad-left">
                A mapper interface can describe multiple mapping methods.
            </p>
            <div class="padded">
                <h5 class="padded info-bg">Mapper interface</h5>
<div class="responsive">
{% highlight java %}
@Mapper
public interface PersonMapper {

    // Returns a new instance of PersonDTO mapped from Person source
    @Maps(withIgnoreMissing = IgnoreMissing.DESTINATION)
    PersonDto asPersonDTO(Person source);

    // Returns a new instance of Person mapped from PersonDTO source
    @Maps(withIgnoreMissing = IgnoreMissing.SOURCE)
    Person asPerson(PersonDTO source);
}
{% endhighlight %}
</div>            </div>
            <p class="pad-left">
                Here we used <code>@Maps</code> annotation to describe mapping per method. Please notice that
                <code>@Mapper</code> configuration is available for all mapping methods while <code>@Maps</code> is only
                applied to a single method. Both annotations provides the exact same parameters.
            </p>
            <h4 id="disabling-missing-field" class="pad-left pad-top">Disabling missing field checks</h4>

            <p class="pad-left">
                By default Selma checks every single missing properties but you can choose to disable these helpfull
                checks.
            </p>
            <div class="padded">
                <h5 class="padded info-bg">Mapper ignoring all missing properties</h5>

{% highlight java %}
@Mapper(withIgnoreMissing = IgnoreMissing.ALL)
public interface PersonMapper {

    // Returns a new instance of PersonDTO mapped from Person source
    PersonDto asPersonDTO(Person source);

    // Returns a new instance of Person mapped from PersonDTO source
    Person asPerson(PersonDTO source);
}
{% endhighlight %}
            </div>
            <p class="pad-left">
                Here we used <code>IgnoreMissing.ALL</code> to disable missing properties checking. So we removed
                <code>@Maps</code> annotation, feel free to combine <code>@Mapper</code> and <code>@Maps</code> in the
                same mapper.
            </p>

            <p class="pad-left alert message ">
                @Maps configuration inherits and override @Mapper configuration.
            </p>

<!--
            Mapping Nested beans
-->
            <h3 id="mapping-nested-beans" class="pad-left pad-top green">Mapping nested beans</h3>
            <p class="pad-left">
                Selma takes care of generating mapping for the complete bean graph. Each embedded bean will be mapped
                in it's own method of the generated code. You can customize the mapping
            </p>
            <div class="container">
                <div class="row">
                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg">Person Bean</h5>

{% highlight java %}
public class Person {

    private String firstName;
    private String lastName;
    private Date birthDay;
    private Address residency;

    // + Getters and Setters
}
{% endhighlight %}
                    </div>

                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg ">Address Bean</h5>

{% highlight java %}
public class Address {

    private String line1;
    private String line2;
    private String zipCode;
    private String city;
    private String country;

    // + Getters and Setters
}
{% endhighlight %}

                    </div>

                </div>
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Mapper declaring nested bean</h5>
{% highlight java %}
@Mapper
public interface PersonMapper {

    // Returns a new instance of PersonDTO mapped from Person source
    PersonDto asPersonDTO(Person source);

    // Returns a new instance of AddressDTO mapped from Address source
    @Maps(withIgnoreFields = "country")
    AddressDTO asAddress(Address source);
}
{% endhighlight %}

                    </div>
                </div>

            </div>
            <p class="pad-left">
                Here we declared the <code>asAddress(Address source)</code> method in the mapper interface to demonstrate
                we can do it. <code>asPersonDTO(Person source)</code> implementation will call <code>asAddress(Address
                source)</code>. <b>Note that you do not need to declare this method for the mapping to work.</b>
            </p>

            <p class="pad-left alert message ">
                @Maps annotation can be used to configure the mapping of each nested bean in the graph.
            </p>

<!--
            Mapping Cyclic beans
-->
            <h3 id="mapping-cyclic-beans" class="pad-left pad-top green">Mapping cyclic beans</h3>
            <p class="pad-left">
                Selma can handle cyclic mapping. This behaviour is disabled by default because it has a small
                performance impact. You can enable it using the <code>withCyclicMapping</code> parameter available in
                <code>@Mapper</code>.
            </p>
            <div class="container">
                <div class="row">
                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg">Person Bean</h5>

{% highlight java %}
public class Person {

    private String firstName;
    private String lastName;
    private Date birthDay;
    private Address residency;

    // + Getters and Setters
}
{% endhighlight %}
                    </div>

                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg ">Address Bean</h5>

{% highlight java %}
public class Address {

    private String line1;
    private String line2;
    private String zipCode;
    private String city;
    private String country;
    private Person person // Cyclic reference here !

    // + Getters and Setters
}
{% endhighlight %}

                    </div>

                </div>
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Mapper supporting cyclic beans</h5>
{% highlight java %}
@Mapper(withCyclicMappings = true)
public interface PersonMapper {

    // Returns a new instance of PersonDTO mapped from Person source
    PersonDto asPersonDTO(Person source);

}
{% endhighlight %}

                    </div>
                </div>

            </div>
            <p class="pad-left">
                Here we declared the <code>asPersonDTO(Person source)</code> method in the mapper interface to
                map Person bean and adress beans. The person bean will be mapped only one time and propagated to the
                person field of the <code>Address</code> bean.
            </p>

            <p class="pad-left alert message ">
                This feature uses a hashmap to know whether a bean has already been mapped.
            </p>

            <!--
                Customize property names mapping
            -->
            <h3 id="customize-property-names" class="pad-left pad-top green">Customize property names mapping</h3>
            <p class="pad-left">
                You can define custom property to property mapping using <code>withCustomFields</code>
                parameter available in <code>@Mapper</code> and <code>@Maps</code>.
            </p>
<div class="container">
                <div class="row">
                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg ">Person Bean</h5>

{% highlight java %}
public class Person {

    private String firstName;
    private String lastName;
    private Date birthDay;

    // + Getters and Setters
}
{% endhighlight %}
                    </div>

                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg ">PersonDTO Bean</h5>

{% highlight java %}
public class PersonDTO {

    private String name;
    private String lastName;
    private Date birthDate;

    // + Getters and Setters
}
{% endhighlight %}

                    </div>

                </div>
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Mapper with custom property names</h5>
{% highlight java %}
@Mapper(
    withCustomFields = {
        @Field({"firstName","name"}), @Field({"Person.birthDay","birthDate"})
    }
)
public interface PersonMapper {

    // Returns a new instance of PersonDTO mapped from Person source
    PersonDto asPersonDTO(Person source);

    // Returns a new instance of Person mapped from PersonDTO source
    Person asPerson(PersonDTO source);
}
{% endhighlight %}

                    </div>
                </div>
            </div>
            <p class="pad-left">
                This configuration will map <code>firstName</code> to <code>name</code> property and
                <code>birthDay</code> to <code>birthDate</code> property. The <code>@Field</code> annotation define a
                route that will be applied from <code>PersonDTO</code> to <code>Person</code> and reverse.
            </p>

            <p class="pad-left alert message ">
                @Field supports prefixes to match fields names using simple class name or FQCN prefix. You can also
                define custom fields in @Maps annotation.
            </p>

            <h3 id="flatten-bean-mapping" class="pad-left pad-top green">Flatten bean mapping</h3>
            <p class="pad-left">
                You can flatten properties from nested bean using <code>withCustomFields</code>
                parameter available in <code>@Mapper</code> and <code>@Maps</code>.
            </p>
<div class="container">
                <div class="row">
                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg">Person Bean</h5>

{% highlight java %}
public class Person {

    private String firstName;
    private String lastName;
    private Date birthDay;

    // See Address bean (line1, line2, zipCode, city, country)
    private Address address;

    // + Getters and Setters
}
{% endhighlight %}
                    </div>

                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg ">PersonDTO Bean</h5>

{% highlight java %}
public class PersonDTO {

    private String firstName;
    private String lastName;
    private Date birthDay;
    private String addressLine1;
    private String addressLine2;
    private String addressZipCode;
    private String addressCity;
    private String addressCountry;

    // + Getters and Setters
}
{% endhighlight %}

                    </div>

                </div>
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Mapper flattening properties from nested bean</h5>
{% highlight java %}
@Mapper(
    withCustomFields = {
        @Field({"address.line1","addressLine1"}), @Field({"address.line2","addressLine2"}),
        @Field({"address.zipCode","addressZipCode"}), @Field({"address.city","addressCity"}),
        @Field({"address.country","addressCountry"})
    }
)
public interface PersonMapper {

    // Returns a new instance of PersonDTO mapped from Person source
    PersonDto asPersonDTO(Person source);

    // Returns a new instance of Person mapped from PersonDTO source
    Person asPerson(PersonDTO source);
}
{% endhighlight %}

                    </div>
                </div>
            </div>
            <p class="pad-left">
                This configuration will flatten properties from <code>Address</code> bean to address* properties in
                <code>PersonDTO</code>. It also works to unflatten the properties from <code>PersonDTO</code> to
                <code>Person</code> and <code>Address</code>.
            </p>

            <p class="pad-left alert message ">
                @Field may flatten from any level of the graph. You are not limited to first nested bean but can point a
                property from any nesting level.
            </p>


        <!-- Reduce @Maps duplication with @InheritMaps -->

         <h3 id="inheritmaps" class="pad-left pad-top green">Reduce @Maps duplication with @InheritMaps</h3>
            <p class="pad-left">
                <code>@Maps</code> annotation is powerfull and can be used multiple times in the same mapper interface.
                The interface can comes to an end where you define the exact same <code>@Maps</code> for multiple
                method. To avoid this kind of code duplication <code>@InheritMaps</code> is here to help you. Instead of
                duplicating the <code>@Maps</code> you can simply use <code>@InheritMaps</code> on the corresponding
                methods.
            </p>
<div class="container">
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Mapper with @InheritMaps</h5>
{% highlight java %}
@Mapper
public interface ExtendMapper {


    @Maps(withCustomFields = {
            @Field({"Proposal.passenger.age", "ProposalDto.passengerAge"}), @Field({"passenger.card", "passengerCard"}),
            @Field({"Proposal.passenger.date", "ProposalDto.passengerDate"})
    }) ProposalDto asProposalDto(Proposal proposal);

    @InheritMaps
    Proposal asProposal(ProposalDto proposal);

    @InheritMaps
    Proposal asProposal(ProposalDto proposal, Proposal out);
}
{% endhighlight %}

                    </div>
                </div>
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Mapper with named @InheritMaps</h5>
{% highlight java %}
@Mapper
public interface ExtendNamedMapper {


    @Maps(withCustomFields = {
            @Field({"Proposal.passenger.age", "ProposalDto.passengerAge"}), @Field({"passenger.card", "passengerCard"}),
            @Field({"Proposal.passenger.date", "ProposalDto.passengerDate"})
    }) ProposalDto asProposalDto(Proposal proposal);

    @Maps(withIgnoreFields = {"passengerAge", "passengerDate", "passenger", "passengerCard"})
    ProposalDto asReducedProposalDto(Proposal proposal);

    @InheritMaps(method = "asReducedProposalDto")
    Proposal asProposal(ProposalDto proposal);

    @InheritMaps(method = "asReducedProposalDto")
    Proposal asProposal(ProposalDto proposal, Proposal out);
}
{% endhighlight %}

                    </div>
                </div>
            </div>
            <p class="pad-left">
                As you can see, the <code>@InheritMaps</code> inherits its configuration from the <code>@Maps</code>.
                Selma does its best to identify the good <code>@Maps</code> decorated method to inherit from. By default
                Selma choose the method with the same in/out types pair.<br>
                Sometimes Selma finds multiple eligible methods to inherit from, in such situation you just need to
                provide the method name to choose in the <code>@InheritMaps</code> parameters.
            </p>


            <h2 id="updating-destination-bean" class="blue pad-left pad-top">Updating destination bean</h2>

            <p class="pad-left">
                Instead of creating a new instance of the destination bean, you can choose to map the source bean
                against a given instance of the destination bean. You only need to declare a second parameter in your
                mapping methods that will be used as destination instance.
            </p>
                 <div class="block pad-left">
                     <h5 class="padded info-bg">Mapper updating a destination bean</h5>
{% highlight java %}
@Mapper
public interface PersonMapper {

    // Returns the given destination PersonDto mapped from Person source
    PersonDto updatePersonDTOFromPerson(Person source, PersonDto destination);

    // Returns the given destination Person mapped from PersonDTO source
    Person updatePersonFromPersonDTO(PersonDTO source, Person destination);
}
{% endhighlight %}
            </div>


            <h2 id="mapping-collections" class="blue pad-left pad-top">Mapping collections</h2>

            <p class="pad-left">
                Selma can map collections using a copy clone strategy. Selma will generate a new collection
                containing the values mapped from source collection. We support almost all kind of collections
                and the generated code takes care of preserving the order of elements.
            </p>
            <p class="pad-left">
                By default Selma uses a setter to populate the newly created collection to the destination bean.
                When using a Jaxb generated bean you won't have a setter, so you'll need to use the getter to retrieve
                a fresh new instance of an empty collection to populate with mapped values.
                For this to work you'll need to use the <code>withCollectionStrategy = ALLOW_GETTER</code> of the
                <code>@Mapper</code> or <code>@Maps</code> annotation.
            </p>

            <div class="container">
                            <div class="row">
                                <div class="one half two-up-small-tablet padded">
                                    <h5 class="padded info-bg">Collection bean source</h5>

{% highlight java %}
public class CollectionBeanSource {

  private List<String> strings;

  public CollectionBeanSource(List<String> strings) {
      this.strings = strings;
  }

  public List<String> getStrings() {
      if(strings == null){
          strings = new ArrayList<String>();
      }
      return strings;
  }
}
{% endhighlight %}
                                </div>

                                <div class="one half two-up-small-tablet padded">
                                    <h5 class="padded info-bg ">Collection bean destination</h5>

{% highlight java %}
public class CollectionBeanDestination {

    private List<String> strings;

    public CollectionBeanDestination() {}

    public CollectionBeanDestination(List<String> strings) {
        this.strings = strings;
    }

    public List<String> getStrings() {
        if(strings == null){
            strings = new ArrayList<String>();
        }
        return strings;
    }

}
{% endhighlight %}

                                </div>

                            </div>
                            <div class="row">
                                <div class="one-up one-up-small-tablet padded">
              <h5 class="padded info-bg">Mapper using getter for collection</h5>
{% highlight java %}
@Mapper(withCollectionStrategy = ALLOW_GETTER)
public interface CollectionMapper {

    CollectionBeanDestination asCollectionBeanDestination(CollectionBeanSource source);

    CollectionBeanDefensiveDestination asCollectionBeanDefensiveDestination(CollectionBeanSource source);

}
{% endhighlight %}

                                </div>
                            </div>
                      </div>
            <p class="pad-left">
                The generated code will call <code>getStrings()</code> from destination bean to
                populate the collection. Be aware that default strategy does not allow to use getter for collection mapping.
            </p>



            <h2 id="mapping-enums" class="blue pad-left pad-top">Mapping enums</h2>

            <p class="pad-left">
                Selma can map enums using a same value strategy by default. Selma will generate a new method for every
                single enum to enum mapping required, using a switch block without default.
            </p>
<div class="container">
                <div class="row">
                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg">Person Bean</h5>

{% highlight java %}
public class Person {

    private String firstName;
    private String lastName;
    private Date birthDay;
    private PersonKind kind;

    public enum PersonKind {
       SIMPLE_CUSTOMER, PRODUCER, BUSINESS_CUSTOMER
    }
    // + Getters and Setters
}
{% endhighlight %}
                    </div>

                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg ">PersonDTO Bean</h5>

{% highlight java %}
public class PersonDTO {

  private String firstName;
    private String lastName;
    private Date birthDay;
    private PersonKindDto kind;

    public enum PersonKindDto {
       SIMPLE_CUSTOMER, PRODUCER, BUSINESS_CUSTOMER
    }
    // + Getters and Setters
}
{% endhighlight %}

                    </div>

                </div>
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Mapper mapping same enum values</h5>
{% highlight java %}
@Mapper
public interface PersonMapper {

    // Returns a new instance of PersonDTO mapped from Person source
    PersonDto asPersonDTO(Person source);

}
{% endhighlight %}

                    </div>
                </div>
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Generated mapping method</h5>
{% highlight java %}
  /**
   * Mapping method overridden by Selma
   */
  public final PersonKindDto asSalesChannelDto(PersonKind in) {
    fr.xebia.extras.selma.beans.PersonKindDto out = null;
    if (in != null) {
      switch (in) {
        case SIMPLE_CUSTOMER :  {
          out = fr.xebia.extras.selma.beans.PersonKindDto.SIMPLE_CUSTOMER;
          break;
        }
        case PRODUCER :  {
          out = fr.xebia.extras.selma.beans.PersonKindDto.PRODUCER;
          break;
        }
        case BUSINESS_CUSTOMER :  {
          out = fr.xebia.extras.selma.beans.PersonKindDto.BUSINESS_CUSTOMER;
          break;
        }
      }
    }
    return out;
  }
{% endhighlight %}

                    </div>
                </div>
            </div>
            <p class="pad-left alert message ">
                Selma will raise compilation errors when both enums does not contain the same values.
            </p>

            <h3 id="enums-default-value" class="green pad-left pad-top">Enums with default value</h3>
            <p class="pad-left">
                Selma can map enums using a same value strategy with a default value. The default value will be used for
                values not existing in both enums.
            </p>

            <div class="container">
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
                        <h5 class="padded info-bg">Person Bean</h5>

{% highlight java %}
public class PersonDto {

    private String firstName;
    private String lastName;
    private Date birthDay;
    private PersonKindDto kind;

    public enum PersonKindDto {
       CUSTOMER, PRODUCER
    }
    // + Getters and Setters
}
{% endhighlight %}
                    </div>
                </div>
                                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Default value</h5>
{% highlight java %}
@Mapper
public interface PersonMapper {

    // Map SIMPLE_CUSTOMER and BUSINESS_CUSTOMER to CUSTOMER
    @Maps(
         withEnums = @EnumMapper(from=PersonKind.class, to=PersonKindDto.class, defaultValue="CUSTOMER")
    )
    PersonDto asPersonDTO(Person source);

    // Map SIMPLE_CUSTOMER and BUSINESS_CUSTOMER to CUSTOMER
    @EnumMapper(defaultValue="CUSTOMER")
    PersonKindDto asPersonKindDto(PersonKind source);

}
{% endhighlight %}
                    </div>
                </div>
            </div>
            <p class="pad-left">
                Here we demonstrated 2 ways of declaring a default value for your enum mapping:
            </p>
            <div class="triple-gap-left">
                <ol class="list pad-left">
                    <li>First one, declares a <code>@Maps</code> with enum, so we need to declare both from and to enum
                        with a default value.</li>
                    <li>Second one, declares a <code>@EnumMapper</code> directly on a method mapping two enums types,
                        with a default value.</li>
                </ol>
            </div>
            <p class="pad-top pad-left">
                It is also possible to declare the <code>enumMapper</code> inside <code>@Mapper</code>.<br/>
                With this configuration <code>SIMPLE_CUSTOMER</code> and <code>BUSINESS_CUSTOMER</code> will be mapped
                to <code>CUSTOMER</code>.
            </p>
            <p class="pad-left alert message ">
                To have more control over the enum mapping, you will need to declare a custom mapper.
            </p>

            <!--  Docs for multiple source beans -->
            <h2  id="#bean-aggregation" class="blue pad-left pad-top">Mapping with multiple source beans</h2>
            <p class="pad-top pad-left">
                Sometimes, you need to aggregate multiple source beans in the same destination bean. Selma can take care
                of this, if you define the mapping method with multiple source beans.<br/>
                This does not change anything for updates method, just add as the last parameter the bean to be updated.
            </p>
<div class="container">
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Mapping method with multiple source beans</h5>
{% highlight java %}
/**
 * This mapper interface demonstrate the use of Bean Aggregation.
 */
@Mapper(withIgnoreFields = "missingProperty")
public interface AggregationMapper {

    AggregatedBean mapFromAggregate(FirstBean first, SecondBean second);

    @Maps(withCustom = AggregatedInterceptor.class)
    AggregatedBean mapFromAggregateWithInterceptor(FirstBean first, SecondBean second);

    AggregatedBean mapFromAggregateInUpdate(FirstBean first, SecondBean second, AggregatedBean out);
}

{% endhighlight %}
                    </div>
                </div>
</div>
        <p class="pad-left">The AggregationMapper generated class maps <code>FirstBean</code> and
            <code>SecondBean</code> properties to the <code>AggregatedBean</code> properties.
            You can notice the <code>mapFromAggregateInUpdate</code> method which will update
            <code>AggregatedBean out</code> and return the result.<br>
            As you can see in <code>mapFromAggregateWithInterceptor</code> method, interceptors ares also supported.
            For them to work, just define the intercepting method with all ordered source beans prior to the out bean
            parameters.
        </p>

            <p class="pad-left alert message ">
                Selma for now does not checks for properties present in multiple source beans. This means that such
                properties can be mapped multiple times in the generated code.
            </p>


            <h2 id="custom-mapper" class="blue pad-left pad-top">Mapping with custom mapper</h2>

            <p class="pad-top pad-left">
                Sometimes, Selma will not do what you need. Let say, you want to convert from String to date or from
                Integer to Float. In Selma, we do not want magic conversion, so converting from boxed Integer to native
                int and reverse is supported but, we do not support auto-magically convert from int to float because
                there can be data loss. So you can define your own custom mapper. <br/>A custom mapper is a class that
                contains one or more methods taking an input parameter (the source bean / value) and return the
                destination value after hand coded mapping. You only need to add the class to the
                <code>withCustom</code> attribute of the <code>@Mapper</code> or <code>@Maps</code> annotation.
            </p>
<div class="container">
                <div class="row">
                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg">Person Bean</h5>

{% highlight java %}
public class Person {

    private String name;
    private Address address;

    // + Getters and Setters
}
{% endhighlight %}
                    </div>

                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg ">PersonDTO Bean</h5>

{% highlight java %}
public class PersonDTO {

    private String name;
    private String address;

    // + Getters and Setters
}
{% endhighlight %}

                    </div>

                </div>
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Custom mapper mapping address to string</h5>
{% highlight java %}
public class AddressCustomMapper {

    // Returns a string representation of the address
    public String addressAsString(Address source){

        return source.toString();
    }

}
{% endhighlight %}
                    </div>
                </div>
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
  <h5 class="padded info-bg">Mapper declaring a custom mapper</h5>
{% highlight java %}
@Mapper(withCustom = AddressCustomMapper.class)
public class PersonMapper {

    // Returns a PersonDTO instance mapped from source
    PersonDTO asPersonDTO(Person source);

}
{% endhighlight %}
                    </div>
                </div>
    </div>

            <p class="pad-left">The PersonMapper generated class will use the <code>AddressCustomMapper</code>
                <code>addressAsString</code> method to map the <code>Address</code> to <code>String</code>.</p>


        <!--                     <li class="h3"><a class="noicon" href="#custom-mapper-field">Custom mapper for specific fields</a></li> -->

            <h3 id="custom-mapper-field" class="green pad-left pad-top">Custom mapper for specific fields</h3>

            <p class="pad-left">
                For now we've seen that it's possible to use custom mappers to apply on specific type to type
                conversion. If you need to apply a specific type to type conversion just for one propertie its also
                possible.
            </p>
            <div class="block padded">
                  <h5 class="padded info-bg">Custom mapper updating destination</h5>
{% highlight java %}
@Mapper(
        withIgnoreFields = {"fr.xebia.extras.selma.beans.PersonIn.male", "fr.xebia.extras.selma.beans.PersonOut.biography"},
        withCustomFields = {
                @Field( value = "age", withCustom = CustomFieldToFieldMapper.CustomAgeAndNamesMapper.class)
        }
)
public interface CustomFieldToFieldMapper {

    String FROM_CUSTOM_FIELD2FIELD_MAPPING = " from custom field2field mapping";
    int AGE_INCREMENT = 42;
    String STRING_TEMPLATE_FOR_STREET = " %s from %s  with @Field(value = \"street\", withCustom = CustomStreetMapper.class)";
    String INTERCEPTED_BY_CUSTOM_INTERCEPTOR = "intercepted by CustomInterceptor";

    @Maps(withCustomFields = {
            @Field(value = "firstName", withCustom = CustomAgeAndNamesMapper.class),
            @Field(value = "street", withCustom = CustomStreetMapper.class)
    })
    PersonOut mapWithCustom(PersonIn in);

    @Maps(withCustomFields = {
            @Field(value = {"firstName", "lastName"}, withCustom = CustomAgeAndNamesMapper.class)
    })
    PersonIn asPersonInInvertingNames(PersonOut in);

    /**
     * Test the use of an interceptor against a field
     */
    @Maps(withIgnoreFields = "Library.name",
            withCustomFields = {
        @Field(value = "books", withCustom = CustomBookInterceptor.class)
    }) LibraryDTO asBookDTO(Library in);

    /**
     * This mapper is called to map the firstname field
     */
    class CustomAgeAndNamesMapper {

        public String mapFirstname(String firstname){
            return firstname + FROM_CUSTOM_FIELD2FIELD_MAPPING;
        }

        public int incrementAge(int age) {
            return age + AGE_INCREMENT;
        }
    }

    /**
     * This mapper is called to map the Street field for
     * PersonOut mapWithCustom(PersonIn in);
     */
    class CustomStreetMapper {
        public String mapStreet(String street){
            return String.format(STRING_TEMPLATE_FOR_STREET,
                    street, CustomStreetMapper.class);
        }
    }

    /**
     * This interceptor is called after the books to books mapping in
     * LibraryDTO asBookDTO(Library in);
     */
    class CustomBookInterceptor {
        public void intercept(List<Book> in, List<BookDTO> out){
            for (BookDTO book : out)
                book.setAuthor(INTERCEPTED_BY_CUSTOM_INTERCEPTOR);
        }
    }
}
{% endhighlight %}
            </div>
            <p class="pad-left">
                As you can see, the <code>@Field</code> annotation now provides a parameter <code>withCustom</code> to
                handle custom mappers to apply to specific fields. They can be applied on Field to Field or on single
                field name. This does work for both interceptors and custom mappers.
            </p>


            <h3 id="update-destination-bean" class="green pad-left pad-top">Update destination bean</h3>

            <p class="pad-left">You can use custom mappers to update the destination bean as described in <a class="noicon" href="#update">
                updating destination bean</a>. For this kind of use the custom mapping method should declare a second
                parameter giving the destination bean.
            </p>
            <div class="block padded">
                  <h5 class="padded info-bg">Custom mapper updating destination</h5>
{% highlight java %}
public class AddressCustomMapper {

    // Update des CustomMapper
    public Address carFromDto(String addressString, Address destination) {
        String []Â lines = addressString.split('\n');
        if (lines.length > 0){
            dest.setFirstLine(lines[0]);
        }
        if (lines.length > 1){
            dest.setSecondLine(lines[1]);
        }
        return dest;
    }

}
{% endhighlight %}
            </div>
            <p class="pad-left">
                All custom mapper class should define a <b>public default constructor</b> so the generated class can
                instantiate it. Just remember, for selma, method name is nothing, just ensure to define the good In/Out
                type pair.<br/>
                Unused custom mapper will be reported as a compilation warning.
            </p>

            <h3 id="mapping-interceptor" class="green pad-left pad-top">Mapping interceptor</h3>

            <p class="pad-left">
                Not convinced by custom mapper, you need to do special things on the source or target bean after the
                mapping occurs. Selma, allows you to define a hook in the custom mapper which will be executed after the
                mapping itself. You just need to define a method returning void and taking two parameters the source
                bean and the destination bean. See the example below:
            </p>
            <div class="block padded">
{% highlight java %}
public class AddressCustomMapper {

    public void interceptAddressToDto(Address source, AddressDto destination) {
        // Do some processing here the destination is already mapped.
    }

}
{% endhighlight %}
            </div>
            <p class="pad-left">
                <code>interceptAddressToDto</code> will be called by the generated mapping code at the end of the
                mapping process.
            </p>
            <p class="pad-left alert message ">
                Every custom mapper instance can be injected in the generated class when you build it from
                <code>Selma</code>. This allows custom mappers to use some services of your application code.
            </p>

            <h3 id="abstract-mapper" class="green pad-left pad-top">Abstract mapper</h3>

            <p class="pad-left">
                The last way to declare custom mappers is to use an abstract class as the mapper de scription
                instead of an interface. Selma parse non abstract methods and load every custom mapper method it contains.
                This can simplify the mapping declaration and allows to call a generated mapping method from a custom mapper.
            </p>
            <div class="block padded">
{% highlight java %}
@Mapper
public abstract class AbstractMapperWithCustom {

    public static final int NUMBER_INCREMENT = 10000;

    public abstract PersonOut asPersonOut(PersonIn in);

    public abstract CityOut asCityOut(CityIn in);

    /**
     * Custom mapper inside the Mapper class
     */
    public AddressOut mapAddress(AddressIn addressIn){
        AddressOut res= null;
        if (addressIn != null){
            res = new AddressOut();
            res.setCity(this.asCityOut(addressIn.getCity()));
            res.setExtras(addressIn.getExtras() == null ? null : new ArrayList<String>(addressIn.getExtras()));
            res.setNumber(addressIn.getNumber() + NUMBER_INCREMENT);
            res.setPrincipal(addressIn.isPrincipal());
            res.setStreet(addressIn.getStreet());
        }
        return res;
    }
}
{% endhighlight %}
            </div>
            <p class="pad-left">
                The generated code will call <code>mapAddress()</code> method for each <code>AddressIn</code> it should map.
                To handle the mapping of <code>CityIn</code> to <code>CityOut</code> the custom mapping method calls
                <code>asCityOut()</code> implementation of the generated code.
            </p>
            <p class="pad-left alert message ">
              If you need to add some dependencies to use in the custom mapping methods, you can simply add a setter
              and use it at the mapper build time.
            </p>
            <h3 id="mapping-selma-mapper" class="green pad-left pad-top">Selma Mapper as custom mapper</h3>

            <p class="pad-left">
                Selma allows to declare a Mapper interface as the custom mapper of another one. Doing this way
                you can compose a complex mapping strategy made of several mappers calling each other.
                All mappers will be generated in their private scope.
            </p>
            <div class="block padded">
                  <h5 class="padded info-bg">Person Mapper</h5>
  {% highlight java %}
  @Mapper(withCustom = AddressMapper.class)
  public interface PersonMapper {

      PersonOut mapWithAddressMapper(PersonIn in);

  }
  {% endhighlight %}
            </div>
            <div class="block padded">
                  <h5 class="padded info-bg">Address Mapper</h5>
  {% highlight java %}
  @Mapper
  public interface AddressMapper {

      AddressOut asAddressOut(AddressIn in);

      AddressOut asAddressOut(AddressIn in, AddressOut out);

  }

  {% endhighlight %}
            </div>
            <p class="pad-left">
                <code>AddressMapper</code> will be called by the generated mapping code to handle the mapping
                of <code>AddressIn</code> to <code>AddressOut</code>.
            </p>
            <p class="pad-left alert message ">
                As every custom mapper, the mapper instance should be injected in the generated class when you build it from
                <code>Selma</code>.
            </p>


            <h2 id="immutables" class="blue pad-left pad-top">Mapping immutable types</h2>
            <p class="pad-left">
                By default Selma tries to map every bean. This means that given the same source and destination
                propertie types, Selma will generate code to build a fresh new instance for the destination field.<br/>
                If you want to directly use the source field in destination passing source reference to the destination
                field, you should tell Selma that this is an immutable type.
            </p>
            <div class="container">
                <div class="row">
                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg">Person Bean</h5>

{% highlight java %}
public class Person {

    private String name;
    private String phoneNumber;
    private Date birthDate;
    private Address address;

    // + Getters and Setters
}
{% endhighlight %}
                    </div>

                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg ">PersonDTO Bean</h5>

{% highlight java %}
public class PersonDTO {

    private String name;
    private String phoneNumber;
    private Address address;

    // + Getters and Setters
}
{% endhighlight %}

                    </div>

                </div>
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
                <h5 class="padded info-bg">Mapper passing by reference</h5>
{% highlight java %}
@Mapper(withImmutables = Address.class, withImmutablesPackages = "org.project.immutables")
public class PersonMapper {

    // Returns a PersonDTO instance mapped from source with same address
    @Maps(withIgnoreMissing = IgnoreMissing.DESTINATION)
    PersonDTO asPersonDTO(Person source);

}
{% endhighlight %}
                    </div>
                </div>
            </div>
            <p class="pad-left">
                This mapper will pass by reference any mapping from <code>Address</code> to <code>Address</code>.
                You can specify as many immutables type as you want. It is also possible to declare immutables inside
                <code>@Maps</code>. The <code>withImmutablesPackages</code>, will make Selma consider any bean inside
                <code>org.project.immutables</code> as immutable class.
            </p>


            <h2 id="factory" class="blue pad-left pad-top">Using factory</h2>
            <p class="pad-left">
                Some beans can not be built with a default empty constructor. For some reason the application code use a
                factory to provide new instances of these beans. Default Selma behavior is to call a default constructor
                without parameters.<br/>
                To solve this issue without using reflection at runtime, Selma supports <b>sourced beans</b>, the idea
                is to pass one or more parameters to the constructor call in the generated code.
            </p>

            <h3 id="sourced-beans" class="pad-left pad-top green">Sourced Beans</h3>
            <div class="container">
                <div class="row">
                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg">Person Bean bound to a DataSource</h5>

{% highlight java %}
public class Person {

    private final DataSource ds;
    private String name;
    private String phoneNumber;
    private Date birthDate;

    // Constructor with DataSource
    public Person (DataSource ds){
        this.ds = ds;
    }

    // + Getters and Setters
}
{% endhighlight %}
                    </div>

                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg ">PersonDTO Bean</h5>

{% highlight java %}
public class PersonDTO {

    private String name;
    private String phoneNumbe;
    private Date birthDate;

    // + Getters and Setters
}
{% endhighlight %}

                    </div>

                </div>
                <div class="row">
                    <div class="one-up one-up-small-tablet padded">
                <h5 class="padded info-bg ">Mapper declaring a source</h5>
{% highlight java %}
@Mapper(withSources = DataSource.class)
public class PersonMapper {

    // Returns a Person instance mapped from source populated with a DataSource
    Person asPerson(PersonDTO source);

}
{% endhighlight %}
                    </div>
                </div>
            </div>
            <p class="pad-left">
                This mapper will pass the given <code>DataSource</code> instance to the <code>Person</code> constructor.
                To see how to inject the <code>DataSource</code> instance refer to
                <a href="#building-mapper" class="noicon">Building the mapper</a>.
            </p>
            <h3 id="factory-methods" class="pad-left pad-top green">Factory methods</h3>
            <p class="pad-left">
                You can also provide one or more Factory using the <code>withFactory</code> Mapper annotation parameter.
                The Factory instance can be injected using Selma builder see
                <a href="#building-mapper" class="noicon">Building the mapper</a>.
            </p>
<div class="container">
                <div class="row">
                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg">Person Bean bound to a DataSource</h5>

{% highlight java %}
public class Person implement SourcedBeans {

    private final DataSource ds;
    private String name;
    private String phoneNumber;
    private Date birthDate;

    // Constructor with DataSource
    public Person (DataSource ds){
        this.ds = ds;
    }

    // + Getters and Setters
}
{% endhighlight %}
                    </div>

                    <div class="one half two-up-small-tablet padded">
                        <h5 class="padded info-bg ">PersonDTO Bean</h5>

{% highlight java %}
public class PersonDTO {

    private String name;
    private String phoneNumbe;
    private Date birthDate;

    // + Getters and Setters
}
{% endhighlight %}

                    </div>

                </div>
                <div class="row">
                    <div class="one half two-up-small-tablet padded">
                <h5 class="padded info-bg ">Mapper declaring a Factory</h5>
{% highlight java %}
@Mapper(withFactories = MyFactory.class)
public class PersonMapper {

    // Returns a Person instance mapped from source populated with a DataSource
    Person asPerson(PersonDTO source);

}
{% endhighlight %}
                    </div>
                    <div class="one half two-up-small-tablet padded">
                <h5 class="padded info-bg ">MyFactory bean</h5>
{% highlight java %}
public class MyFactory {

    private final DataSource ds;

    public MyFactory(DataSource ds){
        this.ds = ds;
    }

    public <T extends SourcedBeans>  T newSourceBeansInstance(Class<T> targetType) {
        /* ... */
    }

    public City newCity(){
        return new City(ds);
    }

}
{% endhighlight %}
                    </div>
                </div>
            </div>
            <p class="pad-left">
                This mapper will call the given <code>MyFactory</code> to build new <code>Person</code> by calling the
                generic <code>newSourceBeansInstance</code> method. You can also specify methods like
                <code>newCity</code> to statically provide new instances of the <code>City</code> bean.
                Selma will always first choose matching static typed factory methods. If none are found, Selma will
                choose the generic method that matches with the closest type boundaries.
            </p>
            <h2 id="building-mapper" class="blue pad-left pad-top">Building the mapper</h2>
            <p class="pad-left">
               Now that you've define the mapping contract you need, you probably want to retrieve the generated mapper
                instance. All you need to know for this is the <code>Selma</code> class. It provides a builder API to
                build and configure your mapper instance.
            </p>
            <div class="block pad-left">
                <h5 class="padded info-bg">Builder API</h5>
{% highlight java %}
PersonMapper mapper = Selma.builder(PersonMapper.class).
                        withCustom(customMappers).
                        withSource(dataSources).
                        withFactories(factories).
                        disableCache().build();
{% endhighlight %}
            </div>
            <p class="pad-left">
                Here we build a <code>PersonMapper</code>, providing to it custom mappers and sources.
            </p>
            <div class="triple-gap-left gap-bottom">
                <ol class="list pad-left">
                    <li>We start a builder for the <code>PersonMapper</code> mapper interface.</li>
                    <li>We use <code>withCustom(...)</code> to provide our <a href="#custom-mapper" class="noicon">custom mappers</a>.
                    </li>
                    <li>We use <code>withSource(...)</code> to provide sources to our <a href="#sourced-beans" class="noicon">sourced
                        beans</a>.</li>
                    <li>We use <code>withFactories(...)</code> to provide Factories to our <a href="#factory-methods" class="noicon">Mapper</a>.</li>
                    <li>We call <code>disableCache()</code> to bypass mapper instance cache and force Selma to build a
                        new mapper instance .</li>
                </ol>
            </div>
            <p class="pad-left alert message ">
                By default Selma maintains a cache of the previously loaded mappers, so mappers instance are considered
                Singleton.
            </p>

            <h3 id="spring-ioc" class="green pad-left pad-top">Spring IoC</h3>

            <p class="pad-left">
                If you are using Spring IoC framework, you can configure your mapper interface to be configured as a Spring service.
                Selma will use a <code>@Service</code> to annotate the generated mapper class and it will use <code>@Autowired</code>
                for all claimed custom mappers and factories. The only thing you have to do is configure Spring to scan for annotations in the Mapper
                package.
            </p>
            <div class="block pad-left">
                <h5 class="padded info-bg">Spring Mapper</h5>
{% highlight java %}
@Mapper(withCustom =  CustomImmutableMapperClass.class, withIoC = IoC.SPRING)
public interface AddressMapper {

    AddressOut asAddressOut(AddressIn in);

}
{% endhighlight %}
            </div>
            <p class="pad-left">
                Here we declared a <code>AddressMapper</code>, which will be annotated using Spring annotations. You can
                inject the generated mapper inside your Java beans or services.
            </p>
            <p class="pad-left alert message ">
                By default Selma does not specify a name for the <code>@Service</code> declared, but you can add since
                0.14 <code>withIoCServiceName = YourServiceName</code> to specify a name for the Spring service.
            </p>

        <!--                    <li class="h3"><a class="noicon" href="#cdi-ioc">CDI IoC</a></li> -->
             <h3 id="cdi-ioc" class="green pad-left pad-top">CDI IoC</h3>

            <p class="pad-left">
                The <code>withIoC</code> parameter of the mapper has three options to handle CDI annotations.
                The <code>CDI</code> value generates a <code>@Named</code> bean.
                The <code>CDI_SINGLETON</code> value generates a <code>@Named</code> and <code>@Singleton</code> bean.
                The <code>CDI_APPLICATION_SCOPED</code> value generates a <code>@ApplicationScoped</code> bean.

            </p>
            <div class="block pad-left">
                <h5 class="padded info-bg">Builder API</h5>
{% highlight java %}
@Mapper(withIoC = IoC.CDI)
public interface CustomCdiMapperInMaps {

    public Book asBook(BookDTO source);

    public BookDTO asBookDto(Book source);

}


@Mapper(withIoC = IoC.CDI_SINGLETON)
public interface CustomCdiSingletonMapperInMaps {

    public Book asBook(BookDTO source);

    public BookDTO asBookDto(Book source);

}

@Mapper(withIgnoreFields = "extras", withCustom = CustomImmutableMapperClass.class, withFactories = BeanFactoryClass.class, withIoC = IoC.CDI_APPLICATION_SCOPED, withFinalMappers = false)
public interface AddressMapperCDI {

	AddressOut asAddressOut(AddressIn in);

}
{% endhighlight %}
            </div>
            <p class="pad-left">
                Here we declared three different mappers, to demonstrate the use of the three possible CDI values.
            </p>

            <h2 id="configuration" class="blue pad-left pad-top">Configuration</h2>

            <p class="pad-left">Selma can be used from Java 6 to 8.</p>

            <h3 id="using-maven" class="green pad-left pad-top">Using Maven</h3>

            <p class="pad-left">Old releases of the maven compiler plugin tend to badly support annotation processor
                messages. We use successfully version 3.2.</p>
            <div class="block padded">
{% highlight xml %}
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.2</version>
    <configuration>
        <showWarnings>true</showWarnings>
        <optimize>true</optimize>
        <showDeprecation>true</showDeprecation>
    </configuration>
</plugin>
{% endhighlight %}
            </div>

            <p class="pad-left pad-top">You can also use the annotation processor maven plugin if you can not move to
                maven compiler 3.2.</p>
            <div class="block padded">
{% highlight xml %}
<plugin>
    <groupId>org.bsc.maven</groupId>
    <artifactId>maven-processor-plugin</artifactId>
    <version>2.2.4</version>
    <configuration>
        <defaultOutputDirectory>
            ${project.build.directory}/generated-sources
        </defaultOutputDirectory>
        <processors>
            <processor>fr.xebia.extras.selma.codegen.MapperProcessor</processor>
        </processors>
    </configuration>
    <executions>
        <execution>
            <id>process</id>
            <phase>generate-sources</phase>
            <goals>
                <goal>process</goal>
            </goals>
        </execution>
    </executions>
    <dependencies>
        <dependency>
            <groupId>fr.xebia.extras</groupId>
            <artifactId>selma-processor</artifactId>
            <version>${selma.version}</version>
        </dependency>
    </dependencies>
</plugin>
{% endhighlight %}
            </div>

            <p class="pad-left pad-top">You can find help about configuring eclipse
                <a href="https://github.com/xebia-france/selma/issues/28" class="noicon">here</a>.</p>

            <h3 id="snapshots-build" class="green pad-left pad-top">Snapshot builds</h3>

            <p class="pad-left">You can retrieve snapshots builds from 0.16-SNAPSHOT in the sonatype snapshot
                repository. For this to work, you should add Sonatype snaphot repository in your maven settings.xml or
                pom.xml</p>
            <div class="block padded">
{% highlight xml %}
<repositories>
    <repository>
        <id>oss-sonatype</id>
        <name>oss-sonatype</name>
        <url>https://oss.sonatype.org/content/repositories/snapshots/</url>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository>
</repositories>
{% endhighlight %}
            </div>
        </div>
    </div>

</section>

<footer>
    <div id="footer" class="triple-gap-top-small-tablet triple-gap-top-desktop">
        <div class="container">
            <div class="row">

                <div class="whole align-right">
                    Proudly provided under Apache v2.0 license by <a href="http://twitter.com/XebiaFr">Xebia France</a>
                    and <a href="http://twitter.com/slemesle" target="_blank">S&eacute;ven
                    Le Mesle</a>
                </div>

            </div>
        </div>
    </div>

</footer>

<script>
    // Google Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-56401742-1', 'auto');
    ga('send', 'pageview');

  /*  $('#toc').toc({
    'selectors': 'h2,h3,h4', //elements to use as headings
    'container': '#documentation', //element to find all selectors in
    'smoothScrolling': true, //enable or disable smooth scrolling on click
    'prefix': 'toc', //prefix for anchor tags and class names
    'onHighlight': function(el) {}, //called when a new section is highlighted
    'highlightOnScroll': true, //add class to heading that is currently in focus
    'highlightOffset': 100, //offset to trigger the next headline
    'anchorName': function(i, heading, prefix) { //custom function for anchor name
        return heading.id
    },
    'headerText': function(i, heading, $heading) { //custom function building the header-item text
        return $heading.text();
    },
'itemClass': function(i, heading, $heading, prefix) { // custom function for item class
  return $heading[0].tagName.toLowerCase()+" noicon";
}
});*/
</script>
</body>
</html>
